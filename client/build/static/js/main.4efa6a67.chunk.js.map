{"version":3,"sources":["scss/BookEditRC.module.scss","scss/VerifyEmail.module.scss","scss/AdminBooksMain.module.scss","scss/Footer.module.scss","scss/HomeScreen.module.scss","scss/UserBooksMain.module.scss","contexts/LoginContext.jsx","contexts/UserContext.jsx","helpers/axios.js","components/ForgotPassword.jsx","components/LateOTPRequest.jsx","components/NavbarMenu.jsx","components/ResetPassword.jsx","components/VerifyEmail.jsx","images/book-without-cover.gif","helpers/uniqueId.js","helpers/uniqueArrayData.js","views/AdminBooksMain.jsx","components/AdminNewEditLogic.jsx","views/AdminNewEditScreen.jsx","components/Footer.jsx","views/HomeScreen.jsx","components/UserFormAntd.jsx","views/LoginRegisterScreen.jsx","components/BookEditRC.jsx","views/UserBooksContainer.jsx","views/UserBooksMain.jsx","routes/AppRoutes.jsx","App.js","index.js"],"names":["module","exports","LoginContext","createContext","LoginProvider","props","useState","isLogin","setIsLogin","Provider","value","children","UserContext","UserProvider","storedUser","JSON","parse","localStorage","getItem","user","setUser","baseUrl","process","KEY","axiosWithoutToken","endpoint","data","method","url","axios","axiosWithToken","token","headers","ForgotPassword","Form","useForm","form","forgotPassword","values","a","Swal","fire","icon","title","msg","confirmButtonText","response","Container","className","span","labelCol","wrapperCol","onFinish","initialValues","email","onFinishFailed","errorInfo","console","log","Item","label","name","rules","type","required","message","prefix","UserOutlined","placeholder","htmlType","LateOTPRequest","history","createBrowserHistory","require","forceRefresh","sendValidationOTP","setItem","stringify","userId","_id","firstName","showConfirmButton","then","result","isConfirmed","push","NavbarMenu","useHistory","useContext","Navbar","bg","expand","fixed","Brand","id","src","alt","width","height","Toggle","Collapse","Nav","Link","onClick","faHome","faBookOpen","faUserPlus","faSignInAlt","ResetPassword","location","useLocation","invalidUser","setInvalidUser","loaded","setLoaded","queryString","search","verifyToken","success","useEffect","timer","setTimeout","clearTimeout","resetPassword","password","newPass","jwtError","passwordConfirmation","min","max","hasFeedback","Password","LockOutlined","dependencies","getFieldValue","validator","_","Promise","reject","Error","resolve","size","style","marginTop","VerifyEmail","code","setCode","setCompleted","storedData","dataToAxios","otp","validateEmail","removeItem","length","styles","pinField","onChange","onComplete","format","k","toUpperCase","validate","autoFocus","uid","Date","now","toString","Math","random","substr","uniqueArrayData","array","fieldToFilter","setValues","Set","map","ele","Array","from","AdminBooksMain","books","setBooks","page","setPage","pageSize","setPageSize","getAllBooks","booksData","row","key","handleLogOut","deleteSingleBook","record","showDenyButton","denyButtonText","filter","book","isDenied","role","columns","dataIndex","filters","author","text","onFilter","indexOf","sorter","b","year","publisher","subject","align","numberOfPages","render","noBookCover","EditOutlined","color","marginLeft","fontSize","DeleteOutlined","justify","danger","registeredBooks","count","showZero","dataSource","pagination","showSizeChanger","current","Option","Select","formItemLayout","AdminNewEditLogic","processSubmit","titleButton","offset","AdminNewEditScreen","bookImageUrl","initialData","setInitialData","useParams","getBookById","newBook","adminId","updateBookById","fetchData","undefined","Footer","footer","href","TwitterOutlined","FacebookOutlined","LinkedinOutlined","HomeScreen","bookData","setBookData","getBooksRCHomeScreen","RCHomeScreen","autoplay","effect","libro","comments","randomNum","ceil","floor","comment","rating","image","carouselData","contentStyle","listStyle","lineHeight","margin","allowHalf","disabled","defaultValue","UserFormAntd","titleSubmitButton","askSecret","setAskSecret","registerUser","secretPhrase","adminData","basicData","resetFields","loginUser","userData","lastName","valuePropName","xs","sm","e","target","checked","LoginRegisterScreen","pathname","BookEditRC","static","centrar","TextArea","showCount","maxLength","autoSize","minRows","UserBooksContainer","getCRByBook","CR","newCR","bookId","updateCRById","cr","initialValuesAntd","UserBooksMain","allComments","setAllComments","defaultSortOrder","avgRating","WechatOutlined","showModal","getAllCRByBook","isModalVisible","setIsModalVisible","textAlign","visible","onOk","onCancel","createdAt","updatedAt","moment","calendar","AppRoutes","exact","path","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.4efa6a67.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"static\":\"BookEditRC_static__DhUTB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pinField\":\"VerifyEmail_pinField__cYbVH\",\"shake\":\"VerifyEmail_shake__re7oS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"registeredBooks\":\"AdminBooksMain_registeredBooks__1T_JL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__1Qeoj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contentStyle\":\"HomeScreen_contentStyle__qmpm9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageModal\":\"UserBooksMain_imageModal__Q0x2D\",\"registeredBooks\":\"UserBooksMain_registeredBooks__1PBCj\"};","import { createContext, useState } from \"react\";\n\nexport const LoginContext = createContext();\n\nexport const LoginProvider = (props) => {\n  const [isLogin, setIsLogin] = useState();\n\n  return (\n    <LoginContext.Provider value={{ isLogin, setIsLogin }}>\n      {props.children}\n    </LoginContext.Provider>\n  );\n};\n","import { createContext, useState } from \"react\";\n\nconst KEY = \"biblioteca-app\";\n\nexport const UserContext = createContext();\n\nexport const UserProvider = (props) => {\nconst storedUser = JSON.parse(localStorage.getItem(KEY));\nconst [user, setUser] = useState(storedUser);\n\nreturn (\n    <UserContext.Provider value={{ user, setUser }}>\n    {props.children}\n    </UserContext.Provider>\n);\n};","import axios from \"axios\";\n\nconst baseUrl = process.env.REACT_APP_API_URL;\n\nconst KEY = \"biblioteca-app\";\n\nexport const axiosWithoutToken = (endpoint, data, method = \"GET\") => {\n  const url = `${baseUrl}/${endpoint}`;\n  return axios({ method, url, data });\n};\n\nexport const axiosWithToken = (endpoint, data, method = \"GET\") => {\n  const url = `${baseUrl}/${endpoint}`;\n  const token = JSON.parse(localStorage.getItem(KEY)).token || \"\";\n  return axios({\n    method,\n    url,\n    data,\n    headers: { \"Content-type\": \"application/json\", \"x-token\": token },\n  });\n};\n","import React from \"react\";\nimport { Form, Row, Col, Input, Button } from \"antd\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport Container from \"react-bootstrap/Container\";\nimport Swal from \"sweetalert2\";\nimport { axiosWithoutToken } from \"../helpers/axios\";\n\nexport const ForgotPassword = () => {\n  const onFinishFailed = (errorInfo) => {\n    console.log(\"Failed:\", errorInfo);\n  };\n\n  const formItemLayout = {\n    labelCol: {\n      span: 10,\n    },\n    wrapperCol: {\n      span: 16,\n    },\n  };\n\n  const [form] = Form.useForm();\n\n  //Validar correo de usuario que olvidó la contraseña\n  const forgotPassword = async (values) => {\n    try {\n      const user = await axiosWithoutToken(\n        \"auth/forgot-password\",\n        values,\n        \"POST\"\n      );\n      // console.log(user.data);\n      Swal.fire({\n        icon: \"success\",\n        title: `${user?.data?.msg}`,\n        confirmButtonText: \"Gracias!\",\n      });\n    } catch (error) {\n      // console.log(error.response.data);\n      Swal.fire({\n        icon: \"error\",\n        title: `${error?.response?.data?.msg}`,\n        confirmButtonText: \"Oh no!\",\n      });\n    }\n  };\n\n  return (\n    <Container className=\"m-3 w-75 mx-auto\">\n      <Row>\n        <Col span={14} className=\"border rounded bg-light mx-auto pb-2 pt-4\">\n          <h2 className=\"text-center\">Recuperar contraseña olvidada</h2>\n          <Col span={18} className=\"mx-auto pb-2 pt-4\">\n            <Form\n              form={form}\n              {...formItemLayout}\n              onFinish={forgotPassword}\n              initialValues={{\n                email: \"\",\n              }}\n              onFinishFailed={onFinishFailed}\n            >\n              <Form.Item\n                label=\"Correo electrónico\"\n                name=\"email\"\n                rules={[\n                  {\n                    type: \"email\",\n                    required: true,\n                    message: \"Por favor, ingrese un email válido\",\n                  },\n                ]}\n              >\n                <Input\n                  prefix={<UserOutlined className=\"site-form-item-icon\" />}\n                  placeholder=\"correo@dominio.com\"\n                />\n              </Form.Item>\n              <Col span={18} className=\"mx-auto text-center my-2\">\n                <Button type=\"primary\" htmlType=\"submit\">\n                  Enviarme link para resetear contraseña\n                </Button>\n              </Col>\n            </Form>\n          </Col>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n","import React from \"react\";\nimport { Form, Row, Col, Input, Button } from \"antd\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport Container from \"react-bootstrap/Container\";\nimport Swal from \"sweetalert2\";\nimport { axiosWithoutToken } from \"../helpers/axios\";\n\nexport const LateOTPRequest = () => {\n  //Tuve que hacerlo de esta manera, porque importando useHistory y usando history.push() no me recargaba la ruta indicada\n  const createBrowserHistory = require(\"history\").createBrowserHistory;\n  const history = createBrowserHistory({ forceRefresh: true });\n\n  const onFinishFailed = (errorInfo) => {\n    console.log(\"Failed:\", errorInfo);\n  };\n\n  const formItemLayout = {\n    labelCol: {\n      span: 10,\n    },\n    wrapperCol: {\n      span: 16,\n    },\n  };\n\n  const [form] = Form.useForm();\n\n  //Enviar OTP para validar e-mail\n  const sendValidationOTP = async (values) => {\n    try {\n      const response = await axiosWithoutToken(\n        \"auth/late-verify-email\",\n        values,\n        \"POST\"\n      );\n      // console.log(\"all good\", response.data);\n      localStorage.setItem(\n        \"validateEmail\",\n        JSON.stringify({\n          userId: response.data.user?._id,\n          firstName: response.data.user?.firstName,\n          token: response.data.token,\n        })\n      );\n      Swal.fire({\n        icon: \"success\",\n        title: \"Revise su inbox para validar su e-mail\",\n        showConfirmButton: true,\n        confirmButtonText: \"Ok!\",\n      }).then((result) => {\n        if (result.isConfirmed) {\n          history.push(\"/verify-email\");\n        }\n      });\n    } catch (error) {\n      Swal.fire({\n        icon: \"error\",\n        title: `${error?.response?.data?.msg}`,\n        confirmButtonText: \"Oh no!\",\n      });\n    }\n  };\n\n  return (\n    <Container className=\"m-3 w-75 mx-auto\">\n      <Row>\n        <Col span={14} className=\"border rounded bg-light mx-auto pb-2 pt-4\">\n          <h2 className=\"text-center\">Ingresar e-mail a validar</h2>\n          <Col span={18} className=\"mx-auto pb-2 pt-4\">\n            <Form\n              form={form}\n              {...formItemLayout}\n              onFinish={sendValidationOTP}\n              initialValues={{\n                email: \"\",\n              }}\n              onFinishFailed={onFinishFailed}\n            >\n              <Form.Item\n                label=\"Correo electrónico\"\n                name=\"email\"\n                rules={[\n                  {\n                    type: \"email\",\n                    required: true,\n                    message: \"Por favor, ingrese un email válido\",\n                  },\n                ]}\n              >\n                <Input\n                  prefix={<UserOutlined className=\"site-form-item-icon\" />}\n                  placeholder=\"correo@dominio.com\"\n                />\n              </Form.Item>\n              <Col span={18} className=\"mx-auto text-center my-2\">\n                <Button type=\"primary\" htmlType=\"submit\">\n                  Enviarme PIN para validar e-mail\n                </Button>\n              </Col>\n            </Form>\n          </Col>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\nimport { useHistory } from \"react-router\";\nimport { LoginContext } from \"../contexts/LoginContext\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faUserPlus,\n  faSignInAlt,\n  faHome,\n  faBookOpen,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nexport const NavbarMenu = () => {\n  const history = useHistory();\n  const { setIsLogin } = useContext(LoginContext);\n\n  const handleRegister = () => {\n    setIsLogin(false);\n    history.push(\"/register\");\n  };\n\n  const handleLogin = () => {\n    setIsLogin(true);\n    history.push(\"/login\");\n  };\n\n  return (\n    <Navbar bg=\"light\" expand=\"lg\" fixed=\"top\">\n      <Container>\n        <Navbar.Brand id=\"brand-text\">\n          <img\n            src=\"/libro-menu.jpeg\"\n            alt=\"Imagen de libro abierto\"\n            width=\"60\"\n            height=\"40\"\n            className=\"d-inline-block align-middle\"\n          />{\" \"}\n          <b>Biblioteca Virtual</b>\n        </Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"me-auto\">\n            <Nav.Link onClick={() => history.push(\"/\")}>\n              <FontAwesomeIcon icon={faHome} className=\"me-2\" />\n              Home\n            </Nav.Link>\n            <Nav.Link onClick={() => history.push(\"/user/books\")}>\n              <FontAwesomeIcon icon={faBookOpen} className=\"me-2\" />\n              Ver libros\n            </Nav.Link>\n          </Nav>\n          <Nav>\n            <Nav.Link onClick={handleRegister}>\n              <FontAwesomeIcon icon={faUserPlus} className=\"me-2\" />\n              Registro\n            </Nav.Link>\n            <Nav.Link onClick={handleLogin}>\n              <FontAwesomeIcon icon={faSignInAlt} className=\"me-2\" />\n              Login\n            </Nav.Link>\n          </Nav>\n        </Navbar.Collapse>\n      </Container>\n    </Navbar>\n  );\n};\n","//TODO: corregir que cuando la clave es igual a la anterior, no te redirija al login\n\nimport React, { useEffect, useState } from \"react\";\nimport { Form, Row, Col, Input, Button, Alert, Spin } from \"antd\";\nimport Container from \"react-bootstrap/Container\";\nimport { LockOutlined } from \"@ant-design/icons\";\nimport { axiosWithoutToken } from \"../helpers/axios\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport Swal from \"sweetalert2\";\n\nexport const ResetPassword = () => {\n  const location = useLocation();\n  const history = useHistory();\n  const [invalidUser, setInvalidUser] = useState(false);\n  const [loaded, setLoaded] = useState(false);\n\n  const onFinishFailed = (errorInfo) => {\n    console.log(\"Failed:\", errorInfo);\n  };\n\n  const formItemLayout = {\n    labelCol: {\n      span: 10,\n    },\n    wrapperCol: {\n      span: 16,\n    },\n  };\n\n  const [form] = Form.useForm();\n  const { token, id } = queryString.parse(location.search);\n\n  const verifyToken = async () => {\n    try {\n      await axiosWithoutToken(`auth/verify-token?token=${token}&id=${id}`);\n      setLoaded(true);\n    } catch (error) {\n      if (!error?.response?.data.success) {\n        return setInvalidUser(error?.response?.data?.msg);\n      }\n    }\n  };\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      verifyToken();\n    }, 500);\n    return () => clearTimeout(timer);\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const resetPassword = async (values) => {\n    try {\n      const newPass = await axiosWithoutToken(\n        `auth/reset-password?token=${token}&id=${id}`,\n        { password: values.password },\n        \"POST\"\n      );\n      setLoaded(true);\n      // console.log(newPass.data);\n      if (newPass?.data?.success) {\n        Swal.fire({\n          icon: \"success\",\n          title: `${newPass.data.msg}`,\n          showConfirmButton: false,\n          timer: 2400,\n        });\n        setTimeout(() => {\n          history.push(\"/login\");\n        }, 2500);\n      }\n    } catch (err) {\n      if (err?.response?.data) {\n        const { data } = err.response;\n        Swal.fire({\n          icon: \"error\",\n          title: `${data.msg}`,\n          confirmButtonText: \"Oh no!\",\n        });\n        if (data.jwtError) {\n          history.push(\"/login\");\n        }\n      }\n    }\n  };\n\n  if (invalidUser) {\n    return (\n      <Container className=\"m-3 w-75 mx-auto\">\n        <Alert\n          message={invalidUser}\n          type=\"error\"\n          className=\"text-center fs-3\"\n        />\n      </Container>\n    );\n  }\n\n  return (\n    <>\n      {loaded ? (\n        <Container className=\"m-3 w-75 mx-auto\">\n          <Row>\n            <Col\n              span={14}\n              className=\"border rounded bg-light mx-auto pb-2 pt-4\"\n            >\n              <h2 className=\"text-center\">Ingrese su nueva contraseña</h2>\n              <Col span={18} className=\"mx-auto pb-2 pt-4\">\n                <Form\n                  form={form}\n                  {...formItemLayout}\n                  onFinish={resetPassword}\n                  initialValues={{\n                    password: \"\",\n                    passwordConfirmation: \"\",\n                  }}\n                  onFinishFailed={onFinishFailed}\n                >\n                  <Form.Item\n                    label=\"Contraseña\"\n                    name=\"password\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Por favor, ingrese su nueva contraseña\",\n                      },\n                      { min: 8, message: \"Mínimo 8 caracteres\" },\n                      { max: 20, message: \"Máximo 20 caracteres\" },\n                    ]}\n                    hasFeedback\n                  >\n                    <Input.Password\n                      prefix={<LockOutlined className=\"site-form-item-icon\" />}\n                      placeholder=\"********\"\n                    />\n                  </Form.Item>\n\n                  <Form.Item\n                    name=\"passwordConfirmation\"\n                    label=\"Confirmar contraseña\"\n                    dependencies={[\"password\"]}\n                    hasFeedback\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Por favor, confirme su nueva contraseña\",\n                      },\n                      ({ getFieldValue }) => ({\n                        validator(_, value) {\n                          if (!value || getFieldValue(\"password\") === value) {\n                            return Promise.resolve();\n                          }\n                          return Promise.reject(\n                            new Error(\"Las contraseñas ingresadas no coinciden\")\n                          );\n                        },\n                      }),\n                    ]}\n                  >\n                    <Input.Password\n                      prefix={<LockOutlined className=\"site-form-item-icon\" />}\n                      placeholder=\"********\"\n                    />\n                  </Form.Item>\n\n                  <Col span={18} className=\"mx-auto text-center my-2\">\n                    <Button type=\"primary\" htmlType=\"submit\">\n                      Restablecer contraseña\n                    </Button>\n                  </Col>\n                </Form>\n              </Col>\n            </Col>\n          </Row>\n        </Container>\n      ) : (\n        <Container className=\"m-3 w-75 mx-auto text-center\">\n          <Spin size=\"large\" style={{ marginTop: \"100px\" }} />\n        </Container>\n      )}\n    </>\n  );\n};\n","import React, { useState, useContext } from \"react\";\nimport { Row, Col, Button } from \"antd\";\nimport Container from \"react-bootstrap/Container\";\nimport ReactPinField from \"react-pin-field\";\nimport styles from \"../scss/VerifyEmail.module.scss\";\nimport { axiosWithoutToken } from \"../helpers/axios\";\nimport { LoginContext } from \"../contexts/LoginContext\";\nimport Swal from \"sweetalert2\";\nimport { useHistory } from \"react-router-dom\";\n\nexport const VerifyEmail = () => {\n  const [code, setCode] = useState(\"\");\n  const [, setCompleted] = useState(false);\n  const { setIsLogin } = useContext(LoginContext);\n  const history = useHistory();\n\n  const storedData = JSON.parse(localStorage.getItem(\"validateEmail\"));\n\n  const dataToAxios = {\n    userId: storedData?.userId,\n    otp: code,\n    token: storedData?.token,\n  };\n  // console.log(\"Data to axios\", dataToAxios);\n\n  const validateEmail = async () => {\n    try {\n      const isValidated = await axiosWithoutToken(\n        \"auth/verify-email\",\n        dataToAxios,\n        \"POST\"\n      );\n      if (isValidated.data.success) {\n        Swal.fire({\n          icon: \"success\",\n          title: `<strong>${storedData?.firstName}</strong>, gracias por validar su e-mail`,\n          showConfirmButton: true,\n          confirmButtonText: \"Ir al login\",\n        }).then((result) => {\n          if (result.isConfirmed) {\n            setIsLogin(true);\n            history.push(\"/login\");\n          }\n        });\n        localStorage.removeItem(\"validateEmail\");\n      }\n    } catch (err) {\n      if (err?.response?.data) {\n        const { data } = err.response;\n        Swal.fire({\n          icon: \"error\",\n          title: `${data.msg}`,\n          confirmButtonText: \"Oh no!\",\n        });\n        if (data.jwtError) {\n          localStorage.removeItem(\"validateEmail\");\n          history.push(\"/login\");\n        }\n      }\n    }\n  };\n\n  return (\n    <Container className=\"m-3 w-75 mx-auto\">\n      <Row>\n        <Col span={14} className=\"border rounded bg-light mx-auto pb-2 pt-4\">\n          <h2 className=\"text-center\">Ingrese el pin para validar su e-mail</h2>\n          <p className=\"lead fw-lighter m-4\">\n            Tendrá 10 minutos para validar su e-mail, de lo contrario tendrá que\n            solicitar otro PIN manualmente desde la ruta del Login.\n          </p>\n          <Row>\n            <Col span={8}></Col>\n            <Col span={8}>\n              <ReactPinField\n                length={4}\n                className={styles.pinField}\n                onChange={setCode}\n                onComplete={() => setCompleted(true)}\n                format={(k) => k.toUpperCase()}\n                validate=\"0123456789\"\n                autoFocus\n              />\n            </Col>\n            <Col span={8}></Col>\n          </Row>\n\n          <Col span={18} className=\"mx-auto text-center my-2\">\n            <Button type=\"primary\" onClick={validateEmail} className=\"m-4\">\n              Validar e-mail\n            </Button>\n          </Col>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n","export default \"data:image/gif;base64,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\"","export const uid = () => {\n  const head = Date.now().toString(36);\n  const tail = Math.random().toString(36).substr(2);\n  return head + tail;\n};\n","//Función que recibe todos los vinos y devuelve un arreglo con los valores\n//únicos de lo que deseamos filtrar en las columnas de la tabla\nexport const uniqueArrayData = (array, fieldToFilter) => {\n  const setValues = new Set(array.map((ele) => ele[fieldToFilter]));\n  return Array.from(setValues);\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"antd/dist/antd.css\";\nimport { Table, Image, Badge, Button, Row, Col } from \"antd\";\nimport { axiosWithToken } from \"../helpers/axios\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport noBookCover from \"../images/book-without-cover.gif\";\nimport { UserContext } from \"../contexts/UserContext\";\nimport Swal from \"sweetalert2\";\nimport { uid } from \"../helpers/uniqueId\";\nimport { uniqueArrayData } from \"../helpers/uniqueArrayData\";\nimport styles from \"../scss/AdminBooksMain.module.scss\";\n\nconst KEY = \"biblioteca-app\";\n\nexport const AdminBooksMain = () => {\n  const [books, setBooks] = useState([]);\n  const [loaded, setLoaded] = useState(false);\n  const { user, setUser } = useContext(UserContext);\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(6);\n  const history = useHistory();\n\n  //Obtener todos los libros de la base de datos\n  const getAllBooks = async () => {\n    try {\n      const booksData = await axiosWithToken(\"books\");\n      // console.log(\"Todos los libros\", booksData.data);\n      const result = booksData.data.map((row) => ({\n        ...row,\n        key: uid(),\n      }));\n      setBooks(result);\n      setLoaded(true);\n    } catch (err) {\n      // console.log(\"error\", err);\n      if (err) {\n        Swal.fire({\n          icon: \"error\",\n          title: `${err.response.data.msg}`,\n          showConfirmButton: false,\n          timer: 2000,\n        });\n        setTimeout(() => {\n          handleLogOut();\n        }, 2100);\n      }\n    }\n  };\n\n  const deleteSingleBook = async (record) => {\n    try {\n      await Swal.fire({\n        icon: \"warning\",\n        title: `¿Seguro que quiere borrar el libro <strong>${record.title}</strong>?`,\n        showDenyButton: true,\n        denyButtonText: \"Mejor no\",\n        confirmButtonText: \"Sí\",\n      }).then((result) => {\n        if (result.isConfirmed) {\n          Swal.fire(\"¡Borrado!\", \"\", \"success\");\n          axiosWithToken(`book/delete/${record._id}`, {}, \"DELETE\");\n          setBooks(books.filter((book) => book._id !== record._id));\n        } else if (result.isDenied) {\n          Swal.fire(\"No se borrará\", \"\", \"info\");\n        }\n      });\n    } catch (err) {\n      // console.log(\"Error al borrar\", err);\n      if (err) {\n        Swal.fire({\n          icon: \"error\",\n          title: `${err.response.data.msg}`,\n          showConfirmButton: false,\n          timer: 2000,\n        });\n        setTimeout(() => {\n          handleLogOut();\n        }, 2100);\n      }\n    }\n  };\n\n  //Valido si usuario existe y si tiene el rol de admin\n  useEffect(() => {\n    // console.log(\"User dentro del useEffect\", user);\n    if (user && user.role === \"admin\") {\n      getAllBooks();\n    } else {\n      history.push(\"/login\");\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleLogOut = () => {\n    setUser(null);\n    localStorage.removeItem(KEY);\n    history.push(\"/login\");\n  };\n\n  //Columnas de la tabla de Antd\n  const columns = [\n    {\n      key: uid(),\n      title: \"Autor\",\n      dataIndex: \"author\",\n      filters: uniqueArrayData(books, \"author\").map((author) => ({\n        text: author,\n        value: author,\n      })),\n      onFilter: (value, record) => record.author.indexOf(value) === 0,\n    },\n    {\n      key: uid(),\n      title: \"Título\",\n      dataIndex: \"title\",\n      filters: uniqueArrayData(books, \"title\").map((title) => ({\n        text: title,\n        value: title,\n      })),\n      onFilter: (value, record) => record.title.indexOf(value) === 0,\n    },\n    {\n      key: uid(),\n      title: \"Año\",\n      dataIndex: \"year\",\n      sorter: (a, b) => a.year - b.year,\n    },\n    {\n      key: uid(),\n      title: \"Editorial\",\n      dataIndex: \"publisher\",\n      filters: uniqueArrayData(books, \"publisher\").map((publisher) => ({\n        text: publisher,\n        value: publisher,\n      })),\n      onFilter: (value, record) => record.publisher.indexOf(value) === 0,\n    },\n    {\n      key: uid(),\n      title: \"Género\",\n      dataIndex: \"subject\",\n      filters: uniqueArrayData(books, \"subject\").map((subject) => ({\n        text: subject,\n        value: subject,\n      })),\n      onFilter: (value, record) => record.subject.indexOf(value) === 0,\n    },\n    {\n      key: uid(),\n      title: \"N.º de págs.\",\n      dataIndex: \"numberOfPages\",\n      align: \"right\",\n      sorter: (a, b) => a.numberOfPages - b.numberOfPages,\n    },\n    {\n      key: uid(),\n      title: \"Img\",\n      dataIndex: \"bookImageUrl\",\n      render: (record) => {\n        return <Image height={60} src={!record ? noBookCover : record} />;\n      },\n    },\n    {\n      key: uid(),\n      title: \"Acciones\",\n      render: (record) => {\n        return (\n          <>\n            <EditOutlined\n              style={{ color: \"#F18F01\", marginLeft: 5, fontSize: 18 }}\n              onClick={() => history.push(`/admin/book/edit/${record._id}`)}\n            />\n            <DeleteOutlined\n              style={{ color: \"#E63F32\", marginLeft: 16, fontSize: 18 }}\n              onClick={() => {\n                deleteSingleBook(record);\n              }}\n            />\n          </>\n        );\n      },\n    },\n  ];\n\n  const tableOnChange = (pagination, filters, sorter) => {\n    console.log(\"Table params\", pagination, filters, sorter);\n  };\n\n  return (\n    <>\n      <Row justify=\"center\">\n        <Col span={22}>\n          <p className=\"text-end\">Hola, {user?.firstName}</p>\n          <Button\n            type=\"primary\"\n            danger\n            className=\"float-end\"\n            onClick={handleLogOut}\n          >\n            Cerrar sesión\n          </Button>\n          <br />\n          <Button\n            type=\"primary\"\n            className=\"d-block\"\n            onClick={() => history.push(\"/admin/book/new\")}\n          >\n            Registrar un libro\n          </Button>\n        </Col>\n      </Row>\n      <Row justify=\"center\">\n        <Col span={22}>\n          <h2 className=\"text-center\">Libros disponibles</h2>\n          {loaded && (\n            <>\n              <div>\n                <p className={styles.registeredBooks}>\n                  Total de libros registrados\n                </p>\n                <Badge count={books.length} showZero />\n              </div>\n              <Table\n                columns={columns}\n                dataSource={books}\n                onChange={tableOnChange}\n                pagination={{\n                  showSizeChanger: true,\n                  current: page,\n                  pageSize: pageSize,\n                  onChange: (page, pageSize) => {\n                    setPage(page);\n                    setPageSize(pageSize);\n                  },\n                }}\n              />\n            </>\n          )}\n        </Col>\n      </Row>\n    </>\n  );\n};\n","import React from \"react\";\nimport { Form, Select, InputNumber, Button, Input, Row, Col } from \"antd\";\n\nconst { Option } = Select;\nconst formItemLayout = {\n  labelCol: {\n    span: 6,\n  },\n  wrapperCol: {\n    span: 14,\n  },\n};\n\nconst onFinishFailed = (errorInfo) => {\n  console.log(\"Failed:\", errorInfo);\n};\n\nexport const AdminNewEditLogic = ({\n  processSubmit,\n  initialValues,\n  titleButton,\n}) => {\n  const [form] = Form.useForm();\n  return (\n    <Row>\n      <Col\n        span={22}\n        className=\"border rounded mx-auto pb-2 pt-4 light-background\"\n      >\n        <Form\n          form={form}\n          name=\"validate_other\"\n          {...formItemLayout}\n          onFinish={processSubmit}\n          initialValues={initialValues}\n          onFinishFailed={onFinishFailed}\n        >\n          <Form.Item\n            label=\"Autor del libro\"\n            name=\"author\"\n            rules={[\n              {\n                type: \"string\",\n                required: true,\n                message: \"Por favor, ingrese el autor del libro\",\n              },\n            ]}\n          >\n            <Input placeholder=\"J. K. Rowling\" />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Título del libro\"\n            name=\"title\"\n            rules={[\n              {\n                type: \"string\",\n                required: true,\n                message: \"Por favor, ingrese el título del libro\",\n              },\n            ]}\n          >\n            <Input placeholder=\"Harry Potter y la piedra filosofal\" />\n          </Form.Item>\n\n          <Form.Item label=\"Año de publicación\">\n            <Form.Item\n              name=\"year\"\n              rules={[\n                {\n                  type: \"number\",\n                  required: true,\n                  message: \"Por favor, ingrese el año de la publicación\",\n                },\n              ]}\n            >\n              <InputNumber min={1500} max={2100} placeholder=\"2020\" />\n            </Form.Item>\n          </Form.Item>\n\n          <Form.Item\n            label=\"Editorial\"\n            name=\"publisher\"\n            rules={[\n              {\n                type: \"string\",\n                required: true,\n                message: \"Por favor, ingrese la editorial\",\n              },\n            ]}\n          >\n            <Input placeholder=\"Salamandra\" />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Género literario\"\n            name=\"subject\"\n            rules={[\n              {\n                required: true,\n                message: \"Por favor, ingrese un género literario\",\n              },\n            ]}\n          >\n            <Select>\n              <Option value=\"\">Seleccione un género literario...</Option>\n              <Option value=\"Suspenso\">Suspenso</Option>\n              <Option value=\"Acción\">Acción</Option>\n              <Option value=\"Historia\">Historia</Option>\n              <Option value=\"Ficción\">Ficción</Option>\n              <Option value=\"Autoayuda\">Autoayuda</Option>\n              <Option value=\"Literatura\">Literatura</Option>\n              <Option value=\"Drama\">Drama</Option>\n              <Option value=\"Novela\">Novela</Option>\n            </Select>\n          </Form.Item>\n\n          <Form.Item label=\"Número de páginas\">\n            <Form.Item\n              name=\"numberOfPages\"\n              rules={[\n                {\n                  type: \"number\",\n                  required: true,\n                  message: \"Por favor, ingrese la cantidad de páginas\",\n                },\n              ]}\n            >\n              <InputNumber min={0} max={2000} placeholder=\"345\" />\n            </Form.Item>\n          </Form.Item>\n\n          <Form.Item\n            label=\"Img url del libro\"\n            name=\"bookImageUrl\"\n            rules={[\n              {\n                type: \"url\",\n                message: \"Por favor, ingrese una URL válida\",\n              },\n            ]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            wrapperCol={{\n              span: 12,\n              offset: 6,\n            }}\n          >\n            <Button type=\"primary\" htmlType=\"submit\">\n              {titleButton}\n            </Button>\n          </Form.Item>\n        </Form>\n      </Col>\n    </Row>\n  );\n};\n","import React, { useState, useContext, useEffect } from \"react\";\nimport { Button, Row, Col } from \"antd\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { AdminNewEditLogic } from \"../components/AdminNewEditLogic\";\nimport Swal from \"sweetalert2\";\nimport { axiosWithToken } from \"../helpers/axios\";\nimport { UserContext } from \"../contexts/UserContext\";\n\nconst KEY = \"biblioteca-app\";\n\nexport const AdminNewEditScreen = () => {\n  const startingData = {\n    author: \"\",\n    title: \"\",\n    year: \"\",\n    publisher: \"\",\n    subject: \"\",\n    numberOfPages: \"\",\n    bookImageUrl: \"\",\n  };\n\n  const history = useHistory();\n  const [loaded, setLoaded] = useState(false);\n  const { user, setUser } = useContext(UserContext);\n  const [initialData, setInitialData] = useState(startingData);\n  const { id } = useParams();\n\n  const getBookById = async () => {\n    try {\n      const book = await axiosWithToken(`book/${id}`);\n      // console.log(\"Data del libro de axios\", book.data);\n      setInitialData(book.data);\n      setLoaded(true);\n    } catch (err) {\n      // console.log(\"Error al obtener un libro por su ID\", err);\n      if (err) {\n        Swal.fire({\n          icon: \"error\",\n          title: `${err.response.data.msg}`,\n          showConfirmButton: false,\n          timer: 2000,\n        });\n        setTimeout(() => {\n          handleLogOut();\n        }, 2100);\n      }\n    }\n  };\n\n  const newBook = async (values) => {\n    // console.log(\"Values adentro del newBook\", values);\n    try {\n      await axiosWithToken(\n        \"book/create\",\n        { ...values, adminId: user._id },\n        \"POST\"\n      );\n      Swal.fire({\n        icon: \"success\",\n        title: \"Libro registrado con éxito\",\n        showConfirmButton: false,\n        timer: 2000,\n      });\n      setTimeout(() => {\n        history.push(\"/admin/books\");\n      }, 2100);\n    } catch (err) {\n      // console.log(err.response.data.message);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Error\",\n        text: err.response.data.message,\n        confirmButtonText: \"Aceptar\",\n      });\n      if (err) {\n        Swal.fire({\n          icon: \"error\",\n          title: `${err.response.data.msg}`,\n          showConfirmButton: false,\n          timer: 2000,\n        });\n        setTimeout(() => {\n          handleLogOut();\n        }, 2100);\n      }\n    }\n  };\n\n  const updateBookById = async (values) => {\n    try {\n      await axiosWithToken(`book/update/${id}`, values, \"PUT\");\n      // console.log(\"Respuesta al actualizar libro\", response);\n      Swal.fire({\n        icon: \"success\",\n        title: \"El libro fue modificado\",\n        showConfirmButton: false,\n        timer: 2000,\n      });\n      setTimeout(() => {\n        history.push(\"/admin/books\");\n      }, 2100);\n    } catch (err) {\n      // console.log(\"Error al modificar el libro\", err);\n      if (err) {\n        Swal.fire({\n          icon: \"error\",\n          title: `${err.response.data.msg}`,\n          showConfirmButton: false,\n          timer: 2000,\n        });\n        setTimeout(() => {\n          handleLogOut();\n        }, 2100);\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (!user) {\n      history.push(\"/login\");\n    }\n  }, [user, history]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      // console.log(\"Id del useEffect\", id);\n      if (id) {\n        await getBookById();\n      } else {\n        setLoaded(true);\n      }\n    };\n    fetchData();\n  }, [id]); //eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleLogOut = () => {\n    setUser(null);\n    localStorage.removeItem(KEY);\n    history.push(\"/login\");\n  };\n\n  return (\n    <>\n      <Row justify=\"center\">\n        <Col span={22}>\n          <p className=\"text-end\">Hola, {user?.firstName}</p>\n          <Button\n            type=\"primary\"\n            danger\n            className=\"float-end\"\n            onClick={handleLogOut}\n          >\n            Cerrar sesión\n          </Button>\n          <br />\n          <Button\n            type=\"primary\"\n            className=\"d-block\"\n            onClick={() => history.push(\"/admin/books\")}\n          >\n            Lista de libros\n          </Button>\n        </Col>\n      </Row>\n      <Row justify=\"center\">\n        <Col span={16}>\n          {loaded && user?.role === \"admin\" ? (\n            <AdminNewEditLogic\n              processSubmit={id !== undefined ? updateBookById : newBook}\n              initialValues={initialData}\n              titleButton={id !== undefined ? \"Actualizar\" : \"Crear\"}\n            />\n          ) : (\n            <h1>No tiene rol de administrador</h1>\n          )}\n        </Col>\n      </Row>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"../scss/Footer.module.scss\";\nimport {\n  FacebookOutlined,\n  LinkedinOutlined,\n  TwitterOutlined,\n} from \"@ant-design/icons\";\n\nexport const Footer = () => {\n  return (\n    <div className={styles.footer}>\n      <footer>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-sm-12 col-md-6\">\n              <h6>Sobre Nosotros</h6>\n              <p>\n                Aquí encontrarás información útil relacionada con los libros que\n                están en tendencia, lo más demandados, los que te llevan a\n                soñar, enamorarte y vivir una vida de fantasía mientras los\n                lees. Déjate guiar a través de las recomendaciones hechas por\n                nuestros usuarios.\n              </p>\n            </div>\n            <div className=\"col-md-3 mx-auto mt-0\">\n              <h6>Síguenos en nuestras redes</h6>\n              <p>\n                <a href={\"/\"}>\n                  <TwitterOutlined className=\"fs-4\" />\n                </a>\n              </p>\n              <p>\n                <a href={\"/\"}>\n                  <FacebookOutlined className=\"fs-4\" />\n                </a>\n              </p>\n              <p>\n                <a href={\"/\"}>\n                  <LinkedinOutlined className=\"fs-4\" />\n                </a>\n              </p>\n            </div>\n          </div>\n          <hr />\n        </div>\n        <div className=\"container text-center\">\n          <p>Copyright &copy; 2021</p>\n        </div>\n      </footer>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Footer } from \"../components/Footer\";\nimport { Carousel, Rate } from \"antd\";\nimport styles from \"../scss/HomeScreen.module.scss\";\nimport Swal from \"sweetalert2\";\nimport { uid } from \"../helpers/uniqueId\";\nimport noBookCover from \"../images/book-without-cover.gif\";\nimport { axiosWithoutToken } from \"../helpers/axios\";\n\nexport const HomeScreen = () => {\n  const [bookData, setBookData] = useState([]);\n\n  const getBooksRCHomeScreen = async () => {\n    try {\n      const RCHomeScreen = await axiosWithoutToken(\"books/homescreen/crs\");\n      setBookData(RCHomeScreen.data);\n    } catch (err) {\n      // console.log(\"Error al obtener comentario/rating del libro\", err);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Error al traerse los comentarios/rating\",\n        showConfirmButton: false,\n        timer: 2000,\n      });\n    }\n  };\n\n  useEffect(() => {\n    getBooksRCHomeScreen();\n  }, []);\n\n  const carouselData = () => {\n    let data = [];\n    for (const libro of bookData) {\n      if (libro.comments.length > 0) {\n        const getRandomIntInclusive = (min, max) => {\n          min = Math.ceil(min);\n          max = Math.floor(max);\n          return Math.floor(Math.random() * (max - min) + min);\n        };\n        const randomNum = getRandomIntInclusive(0, libro.comments.length);\n        data.push({\n          title: libro.title,\n          comment: libro.comments[randomNum].comment,\n          rating: libro.comments[randomNum].rating,\n          image: libro.bookImageUrl,\n        });\n      }\n    }\n    return data;\n  };\n  return (\n    <>\n      <Carousel autoplay effect=\"fade\">\n        {carouselData().map((ele) => (\n          <div key={uid()}>\n            <ul className={styles.contentStyle}>\n              <li style={{ listStyle: \"none\" }}>\n                {\" \"}\n                <span style={{ fontSize: \"1.5rem\", lineHeight: \"3rem\" }}>\n                  {\" \"}\n                  {ele.title}\n                </span>{\" \"}\n              </li>\n              <li style={{ listStyle: \"none\" }}>\n                <img\n                  src={ele.image ? ele.image : noBookCover}\n                  alt={`Imagen del libro ${ele.title}`}\n                  style={{ height: \"180px\", margin: \"0 auto\" }}\n                />\n              </li>\n              <li style={{ listStyle: \"none\" }}>\n                <Rate allowHalf disabled defaultValue={ele.rating} />{\" \"}\n              </li>\n              <li style={{ listStyle: \"none\" }}>\n                \"<em style={{ fontSize: \"1.2rem\" }}>{ele.comment} </em>\"\n              </li>\n            </ul>\n          </div>\n        ))}\n      </Carousel>\n\n      <Footer />\n    </>\n  );\n};\n","import React, { useContext, useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Form, Row, Col, Input, Button, Checkbox, Spin } from \"antd\";\nimport { UserOutlined, LockOutlined } from \"@ant-design/icons\";\nimport { LoginContext } from \"../contexts/LoginContext\";\nimport { UserContext } from \"../contexts/UserContext\";\nimport Swal from \"sweetalert2\";\nimport { axiosWithoutToken } from \"../helpers/axios\";\nimport Container from \"react-bootstrap/Container\";\n\nexport const UserFormAntd = (props) => {\n  const { titleSubmitButton } = props;\n  const [askSecret, setAskSecret] = useState(false);\n  const [loaded, setLoaded] = useState(false);\n\n  const onFinishFailed = (errorInfo) => {\n    console.log(\"Failed:\", errorInfo);\n  };\n\n  const formItemLayout = {\n    labelCol: {\n      span: 10,\n    },\n    wrapperCol: {\n      span: 16,\n    },\n  };\n\n  const tailFormItemLayout = {\n    wrapperCol: {\n      xs: {\n        span: 24,\n        offset: 0,\n      },\n      sm: {\n        span: 16,\n        offset: 8,\n      },\n    },\n  };\n\n  const [form] = Form.useForm();\n\n  //Apis de registrar y login\n  const { isLogin, setIsLogin } = useContext(LoginContext);\n  const { setUser } = useContext(UserContext);\n  const history = useHistory();\n  const KEY = \"biblioteca-app\";\n\n  //Registro de usuario\n  const registerUser = async (values) => {\n    delete values[\"admin\"];\n    try {\n      if (values.secretPhrase) {\n        delete values[\"secretPhrase\"];\n        const adminData = await axiosWithoutToken(\n          \"auth/register\",\n          { ...values, role: \"admin\" },\n          \"POST\"\n        );\n        localStorage.setItem(\n          \"validateEmail\",\n          JSON.stringify({\n            userId: adminData.data.user?._id,\n            firstName: adminData.data.user?.firstName,\n            token: adminData.data.token,\n          })\n        );\n      } else {\n        const basicData = await axiosWithoutToken(\n          \"auth/register\",\n          values,\n          \"POST\"\n        );\n        // console.log(basicData.data);\n        localStorage.setItem(\n          \"validateEmail\",\n          JSON.stringify({\n            userId: basicData.data.user?._id,\n            firstName: basicData.data.user?.firstName,\n            token: basicData.data.token,\n          })\n        );\n      }\n      Swal.fire({\n        icon: \"success\",\n        title: `<strong>${values.firstName}</strong>, bienvenid@. Revise su inbox para validar su e-mail`,\n        showConfirmButton: true,\n        confirmButtonText: \"Ok!\",\n      }).then((result) => {\n        if (result.isConfirmed) {\n          history.push(\"/verify-email\");\n        }\n      });\n      form.resetFields();\n    } catch (err) {\n      if (err?.response?.data) {\n        const { data } = err.response;\n        Swal.fire({\n          icon: \"error\",\n          title: `${data.msg}`,\n          confirmButtonText: \"Lo arreglaré!\",\n        });\n      }\n    }\n  };\n\n  //Login de usuario\n  const loginUser = async (values) => {\n    try {\n      const userData = await axiosWithoutToken(\"auth/login\", values, \"POST\");\n      // console.log(\"User from axios\", userData.data);\n      setUser(userData.data);\n      localStorage.setItem(KEY, JSON.stringify(userData.data));\n      Swal.fire({\n        icon: \"success\",\n        title: \"Inició de sesión exitosa!\",\n        showConfirmButton: false,\n        timer: 2400,\n      });\n      setTimeout(() => {\n        if (userData.data.role === \"admin\") {\n          history.push(\"/admin/books\");\n        } else {\n          history.push(\"/user/books\");\n        }\n      }, 2500);\n    } catch (err) {\n      // console.log(err);\n      Swal.fire({\n        icon: \"error\",\n        title: `${err.response.data.msg}`,\n        confirmButtonText: \"Lo revisaré!\",\n      });\n    }\n  };\n\n  const handleOnClick = () => {\n    if (isLogin) {\n      setIsLogin(false);\n      history.push(\"/register\");\n    } else {\n      setIsLogin(true);\n      history.push(\"/login\");\n    }\n  };\n\n  const onChange = (e) => {\n    // console.log(\"Valor del checkbox\", e.target.checked);\n    e.target.checked === true && !isLogin\n      ? setAskSecret(true)\n      : setAskSecret(false);\n  };\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setLoaded(true);\n    }, 350);\n    return () => clearTimeout(timer);\n  }, []);\n\n  if (loaded) {\n    return (\n      <Col span={14} className=\"border rounded bg-light mx-auto pb-2 pt-4\">\n        {isLogin ? (\n          <h2 className=\"text-center\">Login</h2>\n        ) : (\n          <h2 className=\"text-center\">Registro</h2>\n        )}\n        <Row>\n          <Col span={18} className=\"mx-auto pb-2 pt-4\">\n            <Form\n              form={form}\n              {...formItemLayout}\n              onFinish={isLogin ? loginUser : registerUser}\n              initialValues={{\n                firstName: \"\",\n                lastName: \"\",\n                email: \"\",\n                password: \"\",\n                passwordConfirmation: \"\",\n              }}\n              onFinishFailed={onFinishFailed}\n            >\n              {!isLogin ? (\n                <Form.Item\n                  label=\"Nombre\"\n                  name=\"firstName\"\n                  rules={[\n                    {\n                      type: \"string\",\n                      required: true,\n                      message: \"Por favor, ingrese su nombre\",\n                    },\n                    { min: 3, message: \"Mínimo 3 caracteres\" },\n                  ]}\n                >\n                  <Input placeholder=\"John\" />\n                </Form.Item>\n              ) : null}\n\n              {!isLogin ? (\n                <Form.Item\n                  label=\"Apellido\"\n                  name=\"lastName\"\n                  rules={[\n                    {\n                      type: \"string\",\n                      required: true,\n                      message: \"Por favor, ingrese su apellido\",\n                    },\n                    { min: 3, message: \"Mínimo 3 caracteres\" },\n                  ]}\n                >\n                  <Input placeholder=\"Wick\" />\n                </Form.Item>\n              ) : null}\n\n              <Form.Item\n                label=\"Correo electrónico\"\n                name=\"email\"\n                rules={[\n                  {\n                    type: \"email\",\n                    required: true,\n                    message: \"Por favor, ingrese un email válido\",\n                  },\n                ]}\n              >\n                {isLogin ? (\n                  <Input\n                    prefix={<UserOutlined className=\"site-form-item-icon\" />}\n                    placeholder=\"correo@dominio.com\"\n                  />\n                ) : (\n                  <Input placeholder=\"correo@dominio.com\" />\n                )}\n              </Form.Item>\n\n              <Form.Item\n                label=\"Contraseña\"\n                name=\"password\"\n                rules={[\n                  {\n                    required: true,\n                    message: \"Por favor, ingrese su contraseña\",\n                  },\n                  { min: 8, message: \"Mínimo 8 caracteres\" },\n                  { max: 20, message: \"Máximo 20 caracteres\" },\n                ]}\n                hasFeedback\n              >\n                {isLogin ? (\n                  <Input.Password\n                    prefix={<LockOutlined className=\"site-form-item-icon\" />}\n                    placeholder=\"********\"\n                  />\n                ) : (\n                  <Input.Password placeholder=\"********\" />\n                )}\n              </Form.Item>\n\n              {!isLogin ? (\n                <Form.Item\n                  name=\"passwordConfirmation\"\n                  label=\"Confirmar contraseña\"\n                  dependencies={[\"password\"]}\n                  hasFeedback\n                  rules={[\n                    {\n                      required: true,\n                      message: \"Por favor, confirme su contraseña\",\n                    },\n                    ({ getFieldValue }) => ({\n                      validator(_, value) {\n                        if (!value || getFieldValue(\"password\") === value) {\n                          return Promise.resolve();\n                        }\n                        return Promise.reject(\n                          new Error(\"Las contraseñas ingresadas no coinciden\")\n                        );\n                      },\n                    }),\n                  ]}\n                >\n                  <Input.Password placeholder=\"********\" />\n                </Form.Item>\n              ) : null}\n\n              {!isLogin ? (\n                <>\n                  <Form.Item\n                    name=\"admin\"\n                    valuePropName=\"checked\"\n                    {...tailFormItemLayout}\n                  >\n                    <Checkbox onChange={onChange}>\n                      Quiero registrarme como admin\n                    </Checkbox>\n                  </Form.Item>\n                </>\n              ) : null}\n\n              {askSecret && !isLogin ? (\n                <Form.Item\n                  label=\"Secreto\"\n                  name=\"secretPhrase\"\n                  rules={[\n                    {\n                      validator: (_, value) =>\n                        value === process.env.REACT_APP_SECRET\n                          ? Promise.resolve()\n                          : Promise.reject(\n                              new Error(\"Secreto incorrecto para ser admin\")\n                            ),\n                    },\n                  ]}\n                >\n                  <Input.Password placeholder=\"Ingrese el secreto para ser admin\" />\n                </Form.Item>\n              ) : null}\n\n              <Button\n                type=\"primary\"\n                htmlType=\"submit\"\n                className=\"mb-3 login-form-button\"\n              >\n                {titleSubmitButton}\n              </Button>\n              <Col span={24} className=\"d-flex justify-content-between mb-3\">\n                {isLogin ? (\n                  <>\n                    <a className=\"login-form-forgot\" href=\"/forgot-password\">\n                      Olvidé mi contraseña\n                    </a>\n                    <a className=\"login-form-forgot\" href=\"/late-validation\">\n                      Verificar mi e-mail\n                    </a>\n                  </>\n                ) : null}\n              </Col>\n              <Button onClick={handleOnClick}>\n                Ir al {isLogin ? \"registro\" : \"login\"}\n              </Button>\n            </Form>\n          </Col>\n        </Row>\n      </Col>\n    );\n  } else {\n    return (\n      <Container className=\"m-3 w-75 mx-auto text-center\">\n        <Spin size=\"large\" style={{ marginTop: \"100px\" }} />\n      </Container>\n    );\n  }\n};\n","import React, { useEffect, useContext } from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport Container from \"react-bootstrap/Container\";\nimport { UserContext } from \"../contexts/UserContext\";\nimport { LoginContext } from \"../contexts/LoginContext\";\nimport { UserFormAntd } from \"../components/UserFormAntd\";\nimport { Row } from \"antd\";\n// import styles from \"../scss/LoginRegisterScreen.module.scss\";\n\nexport const LoginRegisterScreen = () => {\n  const { isLogin, setIsLogin } = useContext(LoginContext);\n  const { user } = useContext(UserContext);\n  const location = useLocation();\n  const history = useHistory();\n\n  useEffect(() => {\n    if (user?.role === \"admin\") {\n      history.push(\"/admin/books\");\n    } else if (user?.role === \"basic\") {\n      history.push(\"/user/books\");\n    }\n    location.pathname === \"/register\" ? setIsLogin(false) : setIsLogin(true);\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <Container className=\"m-3 w-75 mx-auto\">\n      <Row>\n        <UserFormAntd titleSubmitButton={isLogin ? \"Login\" : \"Registro\"} />\n      </Row>\n    </Container>\n  );\n};\n","import React from \"react\";\nimport styles from \"../scss/BookEditRC.module.scss\";\nimport { Form, Input, Button, Row, Col, Rate } from \"antd\";\nimport noBookCover from \"../images/book-without-cover.gif\";\n\nconst onFinishFailed = (errorInfo) => {\n  console.log(\"Failed:\", errorInfo);\n};\n\nexport const BookEditRC = ({ processSubmit, initialValues, titleButton }) => {\n  const [form] = Form.useForm();\n  return (\n    <div className=\"border rounded mx-auto pb-2 pt-4 light-background w-50 d-flex flex-column align-items-center\">\n      <div className={styles.static}>\n        <img\n          src={\n            initialValues.bookImageUrl\n              ? initialValues.bookImageUrl\n              : noBookCover\n          }\n          alt={`portada del libro ${initialValues.title}`}\n        ></img>\n        <p>Autor: {initialValues.author}</p>\n        <p>Título: {initialValues.title}</p>\n      </div>\n      <Row>\n        <Col className={styles.centrar}>\n          <Form\n            form={form}\n            name=\"validate_other\"\n            onFinish={processSubmit}\n            initialValues={{\n              rating: initialValues.rating ? initialValues.rating : null,\n              comment: initialValues.comment,\n            }}\n            onFinishFailed={onFinishFailed}\n          >\n            <Form.Item\n              name=\"rating\"\n              label=\"Valoración\"\n              rules={[\n                {\n                  required: true,\n                  message: \"Debe seleccionar un rating\",\n                },\n                {\n                  validator: (_, value) => {\n                    if (value > 0) {\n                      return Promise.resolve();\n                    }\n                    return Promise.reject(\n                      new Error(\"El rating no puede ser cero\")\n                    );\n                  },\n                },\n              ]}\n            >\n              <Rate allowHalf />\n            </Form.Item>\n            <Form.Item\n              name={[\"comment\"]}\n              label=\"Comentario\"\n              rules={[\n                {\n                  type: \"string\",\n                  required: true,\n                  message: \"Debe ingresar un comentario\",\n                },\n                { min: 10, message: \"Mínimo 10 caracteres\" },\n              ]}\n            >\n              <Input.TextArea\n                placeholder=\"Deja un comentario al libro...\"\n                showCount\n                maxLength={400}\n                style={{ width: 600 }}\n                autoSize={{ minRows: 2 }}\n              />\n            </Form.Item>\n            <Form.Item\n              wrapperCol={{\n                span: 12,\n                offset: 10,\n              }}\n            >\n              <Button type=\"primary\" htmlType=\"submit\">\n                {titleButton}\n              </Button>\n            </Form.Item>\n          </Form>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n","import React, { useState, useContext, useEffect } from \"react\";\nimport { Button, Row, Col, Spin } from \"antd\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { UserContext } from \"../contexts/UserContext\";\nimport { BookEditRC } from \"../components/BookEditRC\";\nimport Swal from \"sweetalert2\";\nimport { axiosWithToken } from \"../helpers/axios\";\n\nexport const UserBooksContainer = () => {\n  const history = useHistory();\n  const [loaded, setLoaded] = useState(false);\n  const { user, setUser } = useContext(UserContext);\n  const [initialData, setInitialData] = useState({});\n  const { id } = useParams();\n\n  const getCRByBook = async () => {\n    try {\n      const CR = await axiosWithToken(`cr/book/user/${id}`);\n      // console.log(\"Data de comentarios/rating de axios\", CR.data);\n      setInitialData(CR.data);\n      setLoaded(true);\n    } catch (err) {\n      // console.log(\"Error al obtener comentario/rating por su ID\", err);\n      if (err) {\n        Swal.fire({\n          icon: \"error\",\n          title: `${err.response.data.msg}`,\n          showConfirmButton: false,\n          timer: 2000,\n        });\n        setTimeout(() => {\n          handleLogOut();\n        }, 2100);\n      }\n    }\n  };\n\n  const newCR = async (values) => {\n    try {\n      await axiosWithToken(\"cr/create\", { ...values, bookId: `${id}` }, \"POST\");\n      Swal.fire({\n        icon: \"success\",\n        title: \"Comentario/Rating registrado con éxito\",\n        showConfirmButton: false,\n        timer: 2000,\n      });\n      setTimeout(() => {\n        history.push(\"/user/books\");\n      }, 2100);\n    } catch (err) {\n      // console.log(\"Error al crear comentario/rating\", err);\n      if (err) {\n        Swal.fire({\n          icon: \"error\",\n          title: `${err.response.data.msg}`,\n          showConfirmButton: false,\n          timer: 2000,\n        });\n        setTimeout(() => {\n          handleLogOut();\n        }, 2100);\n      }\n    }\n  };\n\n  const updateCRById = async (values) => {\n    // console.log(\"Value del updateCR\", values);\n    try {\n      await axiosWithToken(\n        `cr/edit/${initialData.cr._id}`,\n        { ...values, _id: initialData.cr._id },\n        \"PUT\"\n      );\n      // console.log(\"Respuesta al actualizar CR\", response);\n      Swal.fire({\n        icon: \"success\",\n        title: \"El Comentario/Rating fue modificado\",\n        showConfirmButton: false,\n        timer: 2000,\n      });\n      setTimeout(() => {\n        history.push(\"/user/books\");\n      }, 2100);\n    } catch (err) {\n      // console.log(\"Error al modificar el libro\", err);\n      if (err) {\n        Swal.fire({\n          icon: \"error\",\n          title: `${err.response.data.msg}`,\n          showConfirmButton: false,\n          timer: 2000,\n        });\n        setTimeout(() => {\n          handleLogOut();\n        }, 2100);\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (!user?._id) {\n      history.push(\"/login\");\n    }\n  }, [user, history]);\n\n  useEffect(() => {\n    if (user && user.role === \"basic\") {\n      const timer = setTimeout(() => {\n        getCRByBook();\n      }, 350);\n      return () => clearTimeout(timer);\n    } else {\n      history.push(\"/login\");\n    }\n  }, [id]); //eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleLogOut = () => {\n    setUser(null);\n    localStorage.removeItem(\"biblioteca-app\");\n    history.push(\"/login\");\n  };\n\n  const initialValuesAntd = (data) => {\n    if (data?.cr === null) {\n      return {\n        bookImageUrl: data.libro.bookImageUrl,\n        title: data.libro.title,\n        author: data.libro.author,\n        rating: 0,\n        comment: \"\",\n      };\n    } else {\n      // console.log(\"desde data.libro\", data);\n      return {\n        bookImageUrl: data?.libro?.bookImageUrl,\n        title: data?.libro?.title,\n        author: data?.libro?.author,\n        rating: data?.cr?.rating,\n        comment: data?.cr?.comment,\n      };\n    }\n  };\n  // console.log(\"Probando la función\", initialValuesAntd(initialData));\n  return (\n    <>\n      <Row justify=\"center\">\n        <Col span={22}>\n          <p className=\"text-end\">Hola, {user?.firstName}</p>\n          <Button\n            type=\"primary\"\n            danger\n            className=\"float-end\"\n            onClick={handleLogOut}\n          >\n            Cerrar sesión\n          </Button>\n          <br />\n          <Button\n            type=\"primary\"\n            className=\"d-block\"\n            onClick={() => history.push(\"/user/books\")}\n          >\n            Lista de libros\n          </Button>\n        </Col>\n      </Row>\n\n      {loaded ? (\n        <BookEditRC\n          processSubmit={initialData?.cr === null ? newCR : updateCRById}\n          initialValues={initialValuesAntd(initialData)}\n          titleButton={initialData?.cr === null ? \"Crear\" : \"Actualizar\"}\n        />\n      ) : (\n        <div className=\"mx-auto pb-2 pt-4 light-background w-50 d-flex flex-column align-items-center\">\n          <Spin size=\"large\" style={{ marginTop: \"100px\" }} />\n        </div>\n      )}\n    </>\n  );\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"antd/dist/antd.css\";\nimport {\n  Table,\n  Image,\n  Badge,\n  Button,\n  Row,\n  Col,\n  Rate,\n  Modal,\n  Timeline,\n  Spin,\n} from \"antd\";\nimport { axiosWithToken } from \"../helpers/axios\";\nimport { EditOutlined, WechatOutlined } from \"@ant-design/icons\";\nimport noBookCover from \"../images/book-without-cover.gif\";\nimport { UserContext } from \"../contexts/UserContext\";\nimport Swal from \"sweetalert2\";\nimport { uid } from \"../helpers/uniqueId\";\nimport { uniqueArrayData } from \"../helpers/uniqueArrayData\";\nimport styles from \"../scss/UserBooksMain.module.scss\";\nimport moment from \"moment\";\nimport \"moment/locale/es-mx\";\nimport { Container } from \"react-bootstrap\";\n\nconst KEY = \"biblioteca-app\";\n\nexport const UserBooksMain = () => {\n  const [books, setBooks] = useState([]);\n  const [loaded, setLoaded] = useState(false);\n  const { user, setUser } = useContext(UserContext);\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(6);\n  const [allComments, setAllComments] = useState({});\n  const history = useHistory();\n\n  //Obtener todos los libros de la base de datos\n  const getAllBooks = async () => {\n    try {\n      const booksData = await axiosWithToken(\"books/user/crs\");\n      // console.log(\"Todos los libros\", booksData.data);\n      const result = booksData.data.map((row) => ({\n        ...row,\n        key: uid(),\n      }));\n      setBooks(result);\n      setLoaded(true);\n    } catch (err) {\n      // console.log(\"error\", err);\n      if (err) {\n        Swal.fire({\n          icon: \"error\",\n          title: `${err.response.data.msg}`,\n          showConfirmButton: false,\n          timer: 2000,\n        });\n        setTimeout(() => {\n          handleLogOut();\n        }, 2100);\n      }\n    }\n  };\n  //Valido si usuario existe y si tiene el rol de admin\n  useEffect(() => {\n    if (user && user.role === \"basic\") {\n      getAllBooks();\n    } else {\n      history.push(\"/login\");\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleLogOut = () => {\n    setUser(null);\n    localStorage.removeItem(KEY);\n    history.push(\"/login\");\n  };\n\n  //Columnas de la tabla de Antd\n  const columns = [\n    {\n      key: uid(),\n      title: \"Autor\",\n      dataIndex: \"author\",\n      filters: uniqueArrayData(books, \"author\").map((author) => ({\n        text: author,\n        value: author,\n      })),\n      onFilter: (value, record) => record.author.indexOf(value) === 0,\n    },\n    {\n      key: uid(),\n      title: \"Título\",\n      dataIndex: \"title\",\n      filters: uniqueArrayData(books, \"title\").map((title) => ({\n        text: title,\n        value: title,\n      })),\n      onFilter: (value, record) => record.title.indexOf(value) === 0,\n    },\n    {\n      key: uid(),\n      title: \"Año\",\n      dataIndex: \"year\",\n      sorter: (a, b) => a.year - b.year,\n    },\n    {\n      key: uid(),\n      title: \"Editorial\",\n      dataIndex: \"publisher\",\n      filters: uniqueArrayData(books, \"publisher\").map((publisher) => ({\n        text: publisher,\n        value: publisher,\n      })),\n      onFilter: (value, record) => record.publisher.indexOf(value) === 0,\n    },\n    {\n      key: uid(),\n      title: \"Género\",\n      dataIndex: \"subject\",\n      filters: uniqueArrayData(books, \"subject\").map((subject) => ({\n        text: subject,\n        value: subject,\n      })),\n      onFilter: (value, record) => record.subject.indexOf(value) === 0,\n    },\n    {\n      key: uid(),\n      title: \"N.º de págs.\",\n      align: \"right\",\n      dataIndex: \"numberOfPages\",\n      sorter: (a, b) => a.numberOfPages - b.numberOfPages,\n    },\n    {\n      key: uid(),\n      title: \"Img\",\n      dataIndex: \"bookImageUrl\",\n      render: (record) => {\n        return <Image height={60} src={!record ? noBookCover : record} />;\n      },\n    },\n    {\n      key: uid(),\n      title: \"Rating\",\n      width: \"15%\",\n      defaultSortOrder: \"descend\",\n      sorter: (a, b) => a.avgRating - b.avgRating,\n      render: (record) => {\n        return (\n          <>\n            <Rate\n              allowHalf\n              disabled\n              defaultValue={record.avgRating === null ? 0 : record.avgRating}\n            />\n            {record.comments.length === 1 ? (\n              <p className=\"text-center text-danger\">\n                {record.comments.length} reseña\n              </p>\n            ) : record.comments.length > 1 ? (\n              <p className=\"text-center text-danger\">\n                {record.comments.length} reseñas\n              </p>\n            ) : (\n              <p className=\"text-center text-secondary\">Sin reseñas</p>\n            )}\n          </>\n        );\n      },\n    },\n    {\n      key: uid(),\n      title: \"Acciones\",\n      render: (record) => {\n        return (\n          <>\n            <EditOutlined\n              style={{ color: \"#F18F01\", marginLeft: 5, fontSize: 18 }}\n              onClick={() => {\n                history.push(`/user/book/${record._id}`);\n              }}\n            />\n            <WechatOutlined\n              style={{ color: \"#3590ff\", marginLeft: 8, fontSize: 22 }}\n              onClick={() => showModal(record)}\n            />\n          </>\n        );\n      },\n    },\n  ];\n\n  const tableOnChange = (pagination, filters, sorter) => {\n    console.log(\"Table params\", pagination, filters, sorter);\n  };\n\n  const getAllCRByBook = async (record) => {\n    try {\n      const data = await axiosWithToken(`cr/book/${record._id}`);\n      setAllComments(data.data);\n      console.log(\"Comentarios por libro\", allComments);\n    } catch (err) {\n      // console.log(\"Error al consultar todos los libros\", err);\n      if (err) {\n        Swal.fire({\n          icon: \"error\",\n          title: `${err.response.data.msg}`,\n          showConfirmButton: false,\n          timer: 2000,\n        });\n        setTimeout(() => {\n          handleLogOut();\n        }, 2100);\n      }\n    }\n  };\n\n  //Modal logic de mostrar comentarios\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  const showModal = (record) => {\n    setIsModalVisible(true);\n    getAllCRByBook(record);\n  };\n\n  const handleOk = () => {\n    setIsModalVisible(false);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  return (\n    <Container className=\"m-3 mx-auto\">\n      <Row>\n        <Col span={22}>\n          <p className=\"text-end\">Hola, {user?.firstName}</p>\n          <Button\n            type=\"primary\"\n            danger\n            className=\"float-end\"\n            onClick={handleLogOut}\n          >\n            Cerrar sesión\n          </Button>\n          <br />\n        </Col>\n      </Row>\n      <Row justify=\"center\">\n        <Col span={22} style={!loaded ? { textAlign: \"center\" } : \"\"}>\n          <h2 className=\"text-center\">Lista de Libros</h2>\n          {loaded ? (\n            <>\n              <div>\n                <p className={styles.registeredBooks}>\n                  Total de libros registrados\n                </p>\n                <Badge count={books.length} showZero />\n              </div>\n              <Table\n                columns={columns}\n                dataSource={books}\n                onChange={tableOnChange}\n                pagination={{\n                  showSizeChanger: true,\n                  current: page,\n                  pageSize: pageSize,\n                  onChange: (page, pageSize) => {\n                    setPage(page);\n                    setPageSize(pageSize);\n                  },\n                }}\n              />\n            </>\n          ) : (\n            <Spin size=\"large\" style={{ marginTop: \"250px\" }} />\n          )}\n        </Col>\n      </Row>\n      <Modal\n        title=\"Comentarios de los usuarios\"\n        visible={isModalVisible}\n        onOk={handleOk}\n        onCancel={handleCancel}\n      >\n        {allComments.length === 0 ? (\n          <p key={uid()}>\n            Aún no hay comentarios, sea el primer usuario en comentar 👏🏼\n          </p>\n        ) : (\n          <Timeline>\n            {allComments?.comments?.map((comment) => (\n              <Timeline.Item key={uid()}>\n                <span>\n                  <b> Comentario de {comment?.user?.firstName}:</b>\n                </span>\n                <br />\n                <Rate allowHalf disabled defaultValue={comment?.rating} />\n                <br />\n                <span>\n                  \"<em>{comment?.comment}</em>\"\n                </span>\n                <br />\n                {comment?.createdAt === comment?.updatedAt ? (\n                  <span>Creado {moment(comment?.createdAt).calendar()}</span>\n                ) : (\n                  <span>Editado {moment(comment?.updatedAt).calendar()}</span>\n                )}\n              </Timeline.Item>\n            ))}\n          </Timeline>\n        )}\n      </Modal>\n    </Container>\n  );\n};\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { ForgotPassword } from \"../components/ForgotPassword\";\nimport { LateOTPRequest } from \"../components/LateOTPRequest\";\nimport { NavbarMenu } from \"../components/NavbarMenu\";\nimport { ResetPassword } from \"../components/ResetPassword\";\nimport { VerifyEmail } from \"../components/VerifyEmail\";\nimport { AdminBooksMain } from \"../views/AdminBooksMain\";\nimport { AdminNewEditScreen } from \"../views/AdminNewEditScreen\";\nimport { HomeScreen } from \"../views/HomeScreen\";\nimport { LoginRegisterScreen } from \"../views/LoginRegisterScreen\";\nimport { UserBooksContainer } from \"../views/UserBooksContainer\";\nimport { UserBooksMain } from \"../views/UserBooksMain\";\n\nexport const AppRoutes = () => {\n  return (\n    <Router>\n      <NavbarMenu />\n      <Switch>\n        <Route exact path=\"/login\">\n          <LoginRegisterScreen />\n        </Route>\n        <Route exact path=\"/register\">\n          <LoginRegisterScreen />\n        </Route>\n        <Route exact path=\"/verify-email\">\n          <VerifyEmail />\n        </Route>\n        <Route exact path=\"/forgot-password\">\n          <ForgotPassword />\n        </Route>\n        <Route exact path=\"/reset-password\">\n          <ResetPassword />\n        </Route>\n        <Route exact path=\"/admin/books\">\n          <AdminBooksMain />\n        </Route>\n        <Route exact path=\"/admin/book/new\">\n          <AdminNewEditScreen />\n        </Route>\n        <Route exact path=\"/admin/book/edit/:id\">\n          <AdminNewEditScreen />\n        </Route>\n        <Route exact path=\"/user/books\">\n          <UserBooksMain />\n        </Route>\n        <Route exact path=\"/user/book/:id\">\n          <UserBooksContainer />\n        </Route>\n        <Router exact path=\"/\">\n          <HomeScreen />\n        </Router>\n        <Router exact path=\"/late-validation\">\n          <LateOTPRequest />\n        </Router>\n      </Switch>\n    </Router>\n  );\n};\n","import { LoginProvider } from \"./contexts/LoginContext\";\nimport { UserProvider } from \"./contexts/UserContext\";\nimport { AppRoutes } from \"./routes/AppRoutes\";\n\nfunction App() {\n  return (\n    <LoginProvider>\n      <UserProvider>\n        <AppRoutes />\n      </UserProvider>\n    </LoginProvider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./scss/elements.scss\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  // <React.StrictMode>\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  // </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}