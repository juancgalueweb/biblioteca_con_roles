(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{194:function(e,t,a){e.exports={static:"BookEditRC_static__DhUTB"}},228:function(e,t,a){e.exports={pinField:"VerifyEmail_pinField__cYbVH",shake:"VerifyEmail_shake__re7oS"}},229:function(e,t,a){e.exports={registeredBooks:"AdminBooksMain_registeredBooks__1T_JL"}},233:function(e,t,a){e.exports={footer:"Footer_footer__1Qeoj"}},234:function(e,t,a){e.exports={contentStyle:"HomeScreen_contentStyle__qmpm9"}},235:function(e,t,a){e.exports={imageModal:"UserBooksMain_imageModal__Q0x2D",registeredBooks:"UserBooksMain_registeredBooks__1PBCj"}},379:function(e,t,a){},380:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(37),s=a.n(n),c=a(7),i=a(2),o=Object(r.createContext)(),l=function(e){var t=Object(r.useState)(),a=Object(c.a)(t,2),n=a[0],s=a[1];return Object(i.jsx)(o.Provider,{value:{isLogin:n,setIsLogin:s},children:e.children})},u=Object(r.createContext)(),d=function(e){var t=JSON.parse(localStorage.getItem("biblioteca-app")),a=Object(r.useState)(t),n=Object(c.a)(a,2),s=n[0],o=n[1];return Object(i.jsx)(u.Provider,{value:{user:s,setUser:o},children:e.children})},j=a(55),m=a(39),b=a(1),h=a(16),f=a.n(h),p=a(34),x=a(388),O=a(383),g=a(384),v=a(238),A=a(57),k=a(397),y=a(56),w=a(28),I=a.n(w),C=a(191),N=a.n(C),S="http://localhost:8000/api",E="biblioteca-app",T=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r="".concat(S,"/").concat(e);return N()({method:a,url:r,data:t})},F=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r="".concat(S,"/").concat(e),n=JSON.parse(localStorage.getItem(E)).token||"";return N()({method:a,url:r,data:t,headers:{"Content-type":"application/json","x-token":n}})},B=function(){var e=x.a.useForm(),t=Object(c.a)(e,1)[0],a=function(){var e=Object(p.a)(f.a.mark((function e(t){var a,r,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T("auth/forgot-password",t,"POST");case 3:r=e.sent,I.a.fire({icon:"success",title:"".concat(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.msg),confirmButtonText:"Gracias!"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I.a.fire({icon:"error",title:"".concat(null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.msg),confirmButtonText:"Oh no!"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)(y.a,{className:"m-3 w-75 mx-auto",children:Object(i.jsx)(O.a,{children:Object(i.jsxs)(g.a,{span:14,className:"border rounded bg-light mx-auto pb-2 pt-4",children:[Object(i.jsx)("h2",{className:"text-center",children:"Recuperar contrase\xf1a olvidada"}),Object(i.jsx)(g.a,{span:18,className:"mx-auto pb-2 pt-4",children:Object(i.jsxs)(x.a,Object(b.a)(Object(b.a)({form:t},{labelCol:{span:10},wrapperCol:{span:16}}),{},{onFinish:a,initialValues:{email:""},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(i.jsx)(x.a.Item,{label:"Correo electr\xf3nico",name:"email",rules:[{type:"email",required:!0,message:"Por favor, ingrese un email v\xe1lido"}],children:Object(i.jsx)(v.a,{prefix:Object(i.jsx)(k.a,{className:"site-form-item-icon"}),placeholder:"correo@dominio.com"})}),Object(i.jsx)(g.a,{span:18,className:"mx-auto text-center my-2",children:Object(i.jsx)(A.a,{type:"primary",htmlType:"submit",children:"Enviarme link para resetear contrase\xf1a"})})]}))})]})})})},P=function(){var e=(0,a(64).createBrowserHistory)({forceRefresh:!0}),t=x.a.useForm(),r=Object(c.a)(t,1)[0],n=function(){var t=Object(p.a)(f.a.mark((function t(a){var r,n,s,c,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T("auth/late-verify-email",a,"POST");case 3:s=t.sent,localStorage.setItem("validateEmail",JSON.stringify({userId:null===(r=s.data.user)||void 0===r?void 0:r._id,firstName:null===(n=s.data.user)||void 0===n?void 0:n.firstName,token:s.data.token})),I.a.fire({icon:"success",title:"Revise su inbox para validar su e-mail",showConfirmButton:!0,confirmButtonText:"Ok!"}).then((function(t){t.isConfirmed&&e.push("/verify-email")})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),I.a.fire({icon:"error",title:"".concat(null===t.t0||void 0===t.t0||null===(c=t.t0.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.msg),confirmButtonText:"Oh no!"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(i.jsx)(y.a,{className:"m-3 w-75 mx-auto",children:Object(i.jsx)(O.a,{children:Object(i.jsxs)(g.a,{span:14,className:"border rounded bg-light mx-auto pb-2 pt-4",children:[Object(i.jsx)("h2",{className:"text-center",children:"Ingresar e-mail a validar"}),Object(i.jsx)(g.a,{span:18,className:"mx-auto pb-2 pt-4",children:Object(i.jsxs)(x.a,Object(b.a)(Object(b.a)({form:r},{labelCol:{span:10},wrapperCol:{span:16}}),{},{onFinish:n,initialValues:{email:""},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(i.jsx)(x.a.Item,{label:"Correo electr\xf3nico",name:"email",rules:[{type:"email",required:!0,message:"Por favor, ingrese un email v\xe1lido"}],children:Object(i.jsx)(v.a,{prefix:Object(i.jsx)(k.a,{className:"site-form-item-icon"}),placeholder:"correo@dominio.com"})}),Object(i.jsx)(g.a,{span:18,className:"mx-auto text-center my-2",children:Object(i.jsx)(A.a,{type:"primary",htmlType:"submit",children:"Enviarme PIN para validar e-mail"})})]}))})]})})})},M=a(386),U=a(387),Q=a(138),L=a(140),q=function(){var e=Object(m.f)(),t=Object(r.useContext)(o).setIsLogin;return Object(i.jsx)(M.a,{bg:"light",expand:"lg",fixed:"top",children:Object(i.jsxs)(y.a,{children:[Object(i.jsxs)(M.a.Brand,{id:"brand-text",children:[Object(i.jsx)("img",{src:"/libro-menu.jpeg",alt:"Imagen de libro abierto",width:"60",height:"40",className:"d-inline-block align-middle"})," ",Object(i.jsx)("b",{children:"Biblioteca Virtual"})]}),Object(i.jsx)(M.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(i.jsxs)(M.a.Collapse,{id:"basic-navbar-nav",children:[Object(i.jsxs)(U.a,{className:"me-auto",children:[Object(i.jsxs)(U.a.Link,{onClick:function(){return e.push("/")},children:[Object(i.jsx)(Q.a,{icon:L.b,className:"me-2"}),"Home"]}),Object(i.jsxs)(U.a.Link,{onClick:function(){return e.push("/user/books")},children:[Object(i.jsx)(Q.a,{icon:L.a,className:"me-2"}),"Ver libros"]})]}),Object(i.jsxs)(U.a,{children:[Object(i.jsxs)(U.a.Link,{onClick:function(){t(!1),e.push("/register")},children:[Object(i.jsx)(Q.a,{icon:L.d,className:"me-2"}),"Registro"]}),Object(i.jsxs)(U.a.Link,{onClick:function(){t(!0),e.push("/login")},children:[Object(i.jsx)(Q.a,{icon:L.c,className:"me-2"}),"Login"]})]})]})]})})},K=a(396),z=a(226),H=a(398),G=a(225),J=a.n(G),R=function(){var e=Object(m.g)(),t=Object(m.f)(),a=Object(r.useState)(!1),n=Object(c.a)(a,2),s=n[0],o=n[1],l=Object(r.useState)(!1),u=Object(c.a)(l,2),d=u[0],j=u[1],h=x.a.useForm(),k=Object(c.a)(h,1)[0],w=J.a.parse(e.search),C=w.token,N=w.id,S=function(){var e=Object(p.a)(f.a.mark((function e(){var t,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T("auth/verify-token?token=".concat(C,"&id=").concat(N));case 3:j(!0),e.next=10;break;case 6:if(e.prev=6,e.t0=e.catch(0),null===e.t0||void 0===e.t0||null===(t=e.t0.response)||void 0===t?void 0:t.data.success){e.next=10;break}return e.abrupt("return",o(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.msg));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=setTimeout((function(){S()}),500);return function(){return clearTimeout(e)}}),[]);var E=function(){var e=Object(p.a)(f.a.mark((function e(a){var r,n,s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T("auth/reset-password?token=".concat(C,"&id=").concat(N),{password:a.password},"POST");case 3:n=e.sent,j(!0),(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.success)&&(I.a.fire({icon:"success",title:"".concat(n.data.msg),showConfirmButton:!1,timer:2400}),setTimeout((function(){t.push("/login")}),2500)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.data)&&(c=e.t0.response.data,I.a.fire({icon:"error",title:"".concat(c.msg),confirmButtonText:"Oh no!"}),c.jwtError&&t.push("/login"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return s?Object(i.jsx)(y.a,{className:"m-3 w-75 mx-auto",children:Object(i.jsx)(K.a,{message:s,type:"error",className:"text-center fs-3"})}):Object(i.jsx)(i.Fragment,{children:d?Object(i.jsx)(y.a,{className:"m-3 w-75 mx-auto",children:Object(i.jsx)(O.a,{children:Object(i.jsxs)(g.a,{span:14,className:"border rounded bg-light mx-auto pb-2 pt-4",children:[Object(i.jsx)("h2",{className:"text-center",children:"Ingrese su nueva contrase\xf1a"}),Object(i.jsx)(g.a,{span:18,className:"mx-auto pb-2 pt-4",children:Object(i.jsxs)(x.a,Object(b.a)(Object(b.a)({form:k},{labelCol:{span:10},wrapperCol:{span:16}}),{},{onFinish:E,initialValues:{password:"",passwordConfirmation:""},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(i.jsx)(x.a.Item,{label:"Contrase\xf1a",name:"password",rules:[{required:!0,message:"Por favor, ingrese su nueva contrase\xf1a"},{min:8,message:"M\xednimo 8 caracteres"},{max:20,message:"M\xe1ximo 20 caracteres"}],hasFeedback:!0,children:Object(i.jsx)(v.a.Password,{prefix:Object(i.jsx)(H.a,{className:"site-form-item-icon"}),placeholder:"********"})}),Object(i.jsx)(x.a.Item,{name:"passwordConfirmation",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Por favor, confirme su nueva contrase\xf1a"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("Las contrase\xf1as ingresadas no coinciden")):Promise.resolve()}}}],children:Object(i.jsx)(v.a.Password,{prefix:Object(i.jsx)(H.a,{className:"site-form-item-icon"}),placeholder:"********"})}),Object(i.jsx)(g.a,{span:18,className:"mx-auto text-center my-2",children:Object(i.jsx)(A.a,{type:"primary",htmlType:"submit",children:"Restablecer contrase\xf1a"})})]}))})]})})}):Object(i.jsx)(y.a,{className:"m-3 w-75 mx-auto text-center",children:Object(i.jsx)(z.a,{size:"large",style:{marginTop:"100px"}})})})},D=a(227),Y=a.n(D),V=a(228),W=a.n(V),Z=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(!1),l=Object(c.a)(s,2)[1],u=Object(r.useContext)(o).setIsLogin,d=Object(m.f)(),j=JSON.parse(localStorage.getItem("validateEmail")),b={userId:null===j||void 0===j?void 0:j.userId,otp:a,token:null===j||void 0===j?void 0:j.token},h=function(){var e=Object(p.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T("auth/verify-email",b,"POST");case 3:e.sent.data.success&&(I.a.fire({icon:"success",title:"<strong>".concat(null===j||void 0===j?void 0:j.firstName,"</strong>, gracias por validar su e-mail"),showConfirmButton:!0,confirmButtonText:"Ir al login"}).then((function(e){e.isConfirmed&&(u(!0),d.push("/login"))})),localStorage.removeItem("validateEmail")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(null===e.t0||void 0===e.t0||null===(t=e.t0.response)||void 0===t?void 0:t.data)&&(a=e.t0.response.data,I.a.fire({icon:"error",title:"".concat(a.msg),confirmButtonText:"Oh no!"}),a.jwtError&&(localStorage.removeItem("validateEmail"),d.push("/login")));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(i.jsx)(y.a,{className:"m-3 w-75 mx-auto",children:Object(i.jsx)(O.a,{children:Object(i.jsxs)(g.a,{span:14,className:"border rounded bg-light mx-auto pb-2 pt-4",children:[Object(i.jsx)("h2",{className:"text-center",children:"Ingrese el pin para validar su e-mail"}),Object(i.jsx)("p",{className:"lead fw-lighter m-4",children:"Tendr\xe1 10 minutos para validar su e-mail, de lo contrario tendr\xe1 que solicitar otro PIN manualmente desde la ruta del Login."}),Object(i.jsxs)(O.a,{children:[Object(i.jsx)(g.a,{span:8}),Object(i.jsx)(g.a,{span:8,children:Object(i.jsx)(Y.a,{length:4,className:W.a.pinField,onChange:n,onComplete:function(){return l(!0)},format:function(e){return e.toUpperCase()},validate:"0123456789",autoFocus:!0})}),Object(i.jsx)(g.a,{span:8})]}),Object(i.jsx)(g.a,{span:18,className:"mx-auto text-center my-2",children:Object(i.jsx)(A.a,{type:"primary",onClick:h,className:"m-4",children:"Validar e-mail"})})]})})})},X=(a(220),a(389)),_=a(394),$=a(385),ee=a(399),te=a(400),ae="data:image/gif;base64,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",re=function(){return Date.now().toString(36)+Math.random().toString(36).substr(2)},ne=function(e,t){var a=new Set(e.map((function(e){return e[t]})));return Array.from(a)},se=a(229),ce=a.n(se),ie=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(!1),o=Object(c.a)(s,2),l=o[0],d=o[1],j=Object(r.useContext)(u),h=j.user,x=j.setUser,v=Object(r.useState)(1),k=Object(c.a)(v,2),y=k[0],w=k[1],C=Object(r.useState)(6),N=Object(c.a)(C,2),S=N[0],E=N[1],T=Object(m.f)(),B=function(){var e=Object(p.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("books");case 3:t=e.sent,a=t.data.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{key:re()})})),n(a),d(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0&&(I.a.fire({icon:"error",title:"".concat(e.t0.response.data.msg),showConfirmButton:!1,timer:2e3}),setTimeout((function(){M()}),2100));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.fire({icon:"warning",title:"\xbfSeguro que quiere borrar el libro <strong>".concat(t.title,"</strong>?"),showDenyButton:!0,denyButtonText:"Mejor no",confirmButtonText:"S\xed"}).then((function(e){e.isConfirmed?(I.a.fire("\xa1Borrado!","","success"),F("book/delete/".concat(t._id),{},"DELETE"),n(a.filter((function(e){return e._id!==t._id})))):e.isDenied&&I.a.fire("No se borrar\xe1","","info")}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0&&(I.a.fire({icon:"error",title:"".concat(e.t0.response.data.msg),showConfirmButton:!1,timer:2e3}),setTimeout((function(){M()}),2100));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){h&&"admin"===h.role?B():T.push("/login")}),[]);var M=function(){x(null),localStorage.removeItem("biblioteca-app"),T.push("/login")},U=[{key:re(),title:"Autor",dataIndex:"author",filters:ne(a,"author").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.author.indexOf(e)}},{key:re(),title:"T\xedtulo",dataIndex:"title",filters:ne(a,"title").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.title.indexOf(e)}},{key:re(),title:"A\xf1o",dataIndex:"year",sorter:function(e,t){return e.year-t.year}},{key:re(),title:"Editorial",dataIndex:"publisher",filters:ne(a,"publisher").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.publisher.indexOf(e)}},{key:re(),title:"G\xe9nero",dataIndex:"subject",filters:ne(a,"subject").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.subject.indexOf(e)}},{key:re(),title:"N.\xba de p\xe1gs.",dataIndex:"numberOfPages",align:"right",sorter:function(e,t){return e.numberOfPages-t.numberOfPages}},{key:re(),title:"Img",dataIndex:"bookImageUrl",render:function(e){return Object(i.jsx)(X.a,{height:60,src:e||ae})}},{key:re(),title:"Acciones",render:function(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(ee.a,{style:{color:"#F18F01",marginLeft:5,fontSize:18},onClick:function(){return T.push("/admin/book/edit/".concat(e._id))}}),Object(i.jsx)(te.a,{style:{color:"#E63F32",marginLeft:16,fontSize:18},onClick:function(){P(e)}})]})}}];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(O.a,{justify:"center",children:Object(i.jsxs)(g.a,{span:22,children:[Object(i.jsxs)("p",{className:"text-end",children:["Hola, ",null===h||void 0===h?void 0:h.firstName]}),Object(i.jsx)(A.a,{type:"primary",danger:!0,className:"float-end",onClick:M,children:"Cerrar sesi\xf3n"}),Object(i.jsx)("br",{}),Object(i.jsx)(A.a,{type:"primary",className:"d-block",onClick:function(){return T.push("/admin/book/new")},children:"Registrar un libro"})]})}),Object(i.jsx)(O.a,{justify:"center",children:Object(i.jsxs)(g.a,{span:22,children:[Object(i.jsx)("h2",{className:"text-center",children:"Libros disponibles"}),l&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{className:ce.a.registeredBooks,children:"Total de libros registrados"}),Object(i.jsx)(_.a,{count:a.length,showZero:!0})]}),Object(i.jsx)($.a,{columns:U,dataSource:a,onChange:function(e,t,a){console.log("Table params",e,t,a)},pagination:{showSizeChanger:!0,current:y,pageSize:S,onChange:function(e,t){w(e),E(t)}}})]})]})})]})},oe=a(137),le=a(390),ue=oe.a.Option,de={labelCol:{span:6},wrapperCol:{span:14}},je=function(e){console.log("Failed:",e)},me=function(e){var t=e.processSubmit,a=e.initialValues,r=e.titleButton,n=x.a.useForm(),s=Object(c.a)(n,1)[0];return Object(i.jsx)(O.a,{children:Object(i.jsx)(g.a,{span:22,className:"border rounded mx-auto pb-2 pt-4 light-background",children:Object(i.jsxs)(x.a,Object(b.a)(Object(b.a)({form:s,name:"validate_other"},de),{},{onFinish:t,initialValues:a,onFinishFailed:je,children:[Object(i.jsx)(x.a.Item,{label:"Autor del libro",name:"author",rules:[{type:"string",required:!0,message:"Por favor, ingrese el autor del libro"}],children:Object(i.jsx)(v.a,{placeholder:"J. K. Rowling"})}),Object(i.jsx)(x.a.Item,{label:"T\xedtulo del libro",name:"title",rules:[{type:"string",required:!0,message:"Por favor, ingrese el t\xedtulo del libro"}],children:Object(i.jsx)(v.a,{placeholder:"Harry Potter y la piedra filosofal"})}),Object(i.jsx)(x.a.Item,{label:"A\xf1o de publicaci\xf3n",children:Object(i.jsx)(x.a.Item,{name:"year",rules:[{type:"number",required:!0,message:"Por favor, ingrese el a\xf1o de la publicaci\xf3n"}],children:Object(i.jsx)(le.a,{min:1500,max:2100,placeholder:"2020"})})}),Object(i.jsx)(x.a.Item,{label:"Editorial",name:"publisher",rules:[{type:"string",required:!0,message:"Por favor, ingrese la editorial"}],children:Object(i.jsx)(v.a,{placeholder:"Salamandra"})}),Object(i.jsx)(x.a.Item,{label:"G\xe9nero literario",name:"subject",rules:[{required:!0,message:"Por favor, ingrese un g\xe9nero literario"}],children:Object(i.jsxs)(oe.a,{children:[Object(i.jsx)(ue,{value:"",children:"Seleccione un g\xe9nero literario..."}),Object(i.jsx)(ue,{value:"Suspenso",children:"Suspenso"}),Object(i.jsx)(ue,{value:"Acci\xf3n",children:"Acci\xf3n"}),Object(i.jsx)(ue,{value:"Historia",children:"Historia"}),Object(i.jsx)(ue,{value:"Ficci\xf3n",children:"Ficci\xf3n"}),Object(i.jsx)(ue,{value:"Autoayuda",children:"Autoayuda"}),Object(i.jsx)(ue,{value:"Literatura",children:"Literatura"}),Object(i.jsx)(ue,{value:"Drama",children:"Drama"}),Object(i.jsx)(ue,{value:"Novela",children:"Novela"})]})}),Object(i.jsx)(x.a.Item,{label:"N\xfamero de p\xe1ginas",children:Object(i.jsx)(x.a.Item,{name:"numberOfPages",rules:[{type:"number",required:!0,message:"Por favor, ingrese la cantidad de p\xe1ginas"}],children:Object(i.jsx)(le.a,{min:0,max:2e3,placeholder:"345"})})}),Object(i.jsx)(x.a.Item,{label:"Img url del libro",name:"bookImageUrl",rules:[{type:"url",message:"Por favor, ingrese una URL v\xe1lida"}],children:Object(i.jsx)(v.a,{})}),Object(i.jsx)(x.a.Item,{wrapperCol:{span:12,offset:6},children:Object(i.jsx)(A.a,{type:"primary",htmlType:"submit",children:r})})]}))})})},be=function(){var e=Object(m.f)(),t=Object(r.useState)(!1),a=Object(c.a)(t,2),n=a[0],s=a[1],o=Object(r.useContext)(u),l=o.user,d=o.setUser,j=Object(r.useState)({author:"",title:"",year:"",publisher:"",subject:"",numberOfPages:"",bookImageUrl:""}),h=Object(c.a)(j,2),x=h[0],v=h[1],k=Object(m.h)().id,y=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("book/".concat(k));case 3:t=e.sent,v(t.data),s(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0&&(I.a.fire({icon:"error",title:"".concat(e.t0.response.data.msg),showConfirmButton:!1,timer:2e3}),setTimeout((function(){N()}),2100));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var t=Object(p.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F("book/create",Object(b.a)(Object(b.a)({},a),{},{adminId:l._id}),"POST");case 3:I.a.fire({icon:"success",title:"Libro registrado con \xe9xito",showConfirmButton:!1,timer:2e3}),setTimeout((function(){e.push("/admin/books")}),2100),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),I.a.fire({icon:"error",title:"Error",text:t.t0.response.data.message,confirmButtonText:"Aceptar"}),t.t0&&(I.a.fire({icon:"error",title:"".concat(t.t0.response.data.msg),showConfirmButton:!1,timer:2e3}),setTimeout((function(){N()}),2100));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(p.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F("book/update/".concat(k),a,"PUT");case 3:I.a.fire({icon:"success",title:"El libro fue modificado",showConfirmButton:!1,timer:2e3}),setTimeout((function(){e.push("/admin/books")}),2100),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0&&(I.a.fire({icon:"error",title:"".concat(t.t0.response.data.msg),showConfirmButton:!1,timer:2e3}),setTimeout((function(){N()}),2100));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){l||e.push("/login")}),[l,e]),Object(r.useEffect)((function(){var e=function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=5;break}return e.next=3,y();case 3:e.next=6;break;case 5:s(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[k]);var N=function(){d(null),localStorage.removeItem("biblioteca-app"),e.push("/login")};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(O.a,{justify:"center",children:Object(i.jsxs)(g.a,{span:22,children:[Object(i.jsxs)("p",{className:"text-end",children:["Hola, ",null===l||void 0===l?void 0:l.firstName]}),Object(i.jsx)(A.a,{type:"primary",danger:!0,className:"float-end",onClick:N,children:"Cerrar sesi\xf3n"}),Object(i.jsx)("br",{}),Object(i.jsx)(A.a,{type:"primary",className:"d-block",onClick:function(){return e.push("/admin/books")},children:"Lista de libros"})]})}),Object(i.jsx)(O.a,{justify:"center",children:Object(i.jsx)(g.a,{span:16,children:n&&"admin"===(null===l||void 0===l?void 0:l.role)?Object(i.jsx)(me,{processSubmit:void 0!==k?C:w,initialValues:x,titleButton:void 0!==k?"Actualizar":"Crear"}):Object(i.jsx)("h1",{children:"No tiene rol de administrador"})})})]})},he=a(232),fe=a(233),pe=a.n(fe),xe=a(401),Oe=a(402),ge=a(403),ve=function(){return Object(i.jsx)("div",{className:pe.a.footer,children:Object(i.jsxs)("footer",{children:[Object(i.jsxs)("div",{className:"container",children:[Object(i.jsxs)("div",{className:"row",children:[Object(i.jsxs)("div",{className:"col-sm-12 col-md-6",children:[Object(i.jsx)("h6",{children:"Sobre Nosotros"}),Object(i.jsx)("p",{children:"Aqu\xed encontrar\xe1s informaci\xf3n \xfatil relacionada con los libros que est\xe1n en tendencia, lo m\xe1s demandados, los que te llevan a so\xf1ar, enamorarte y vivir una vida de fantas\xeda mientras los lees. D\xe9jate guiar a trav\xe9s de las recomendaciones hechas por nuestros usuarios."})]}),Object(i.jsxs)("div",{className:"col-md-3 mx-auto mt-0",children:[Object(i.jsx)("h6",{children:"S\xedguenos en nuestras redes"}),Object(i.jsx)("p",{children:Object(i.jsx)("a",{href:"/",children:Object(i.jsx)(xe.a,{className:"fs-4"})})}),Object(i.jsx)("p",{children:Object(i.jsx)("a",{href:"/",children:Object(i.jsx)(Oe.a,{className:"fs-4"})})}),Object(i.jsx)("p",{children:Object(i.jsx)("a",{href:"/",children:Object(i.jsx)(ge.a,{className:"fs-4"})})})]})]}),Object(i.jsx)("hr",{})]}),Object(i.jsx)("div",{className:"container text-center",children:Object(i.jsx)("p",{children:"Copyright \xa9 2021"})})]})})},Ae=a(391),ke=a(393),ye=a(234),we=a.n(ye),Ie=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),a=t[0],n=t[1],s=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T("books/homescreen/crs");case 3:t=e.sent,n(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I.a.fire({icon:"error",title:"Error al traerse los comentarios/rating",showConfirmButton:!1,timer:2e3});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){s()}),[]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Ae.a,{autoplay:!0,effect:"fade",children:function(){var e,t,r,n=[],s=Object(he.a)(a);try{for(s.s();!(e=s.n()).done;){var c=e.value;if(c.comments.length>0){var i=(t=0,r=c.comments.length,t=Math.ceil(t),r=Math.floor(r),Math.floor(Math.random()*(r-t)+t));n.push({title:c.title,comment:c.comments[i].comment,rating:c.comments[i].rating,image:c.bookImageUrl})}}}catch(o){s.e(o)}finally{s.f()}return n}().map((function(e){return Object(i.jsx)("div",{children:Object(i.jsxs)("ul",{className:we.a.contentStyle,children:[Object(i.jsxs)("li",{style:{listStyle:"none"},children:[" ",Object(i.jsxs)("span",{style:{fontSize:"1.5rem",lineHeight:"3rem"},children:[" ",e.title]})," "]}),Object(i.jsx)("li",{style:{listStyle:"none"},children:Object(i.jsx)("img",{src:e.image?e.image:ae,alt:"Imagen del libro ".concat(e.title),style:{height:"180px",margin:"0 auto"}})}),Object(i.jsxs)("li",{style:{listStyle:"none"},children:[Object(i.jsx)(ke.a,{allowHalf:!0,disabled:!0,defaultValue:e.rating})," "]}),Object(i.jsxs)("li",{style:{listStyle:"none"},children:['"',Object(i.jsxs)("em",{style:{fontSize:"1.2rem"},children:[e.comment," "]}),'"']})]})},re())}))}),Object(i.jsx)(ve,{})]})},Ce=a(126),Ne=function(e){var t=e.titleSubmitButton,a=Object(r.useState)(!1),n=Object(c.a)(a,2),s=n[0],l=n[1],d=Object(r.useState)(!1),j=Object(c.a)(d,2),h=j[0],w=j[1],C=x.a.useForm(),N=Object(c.a)(C,1)[0],S=Object(r.useContext)(o),E=S.isLogin,F=S.setIsLogin,B=Object(r.useContext)(u).setUser,P=Object(m.f)(),M=function(){var e=Object(p.a)(f.a.mark((function e(t){var a,r,n,s,c,i,o,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(delete t.admin,e.prev=1,!t.secretPhrase){e.next=10;break}return delete t.secretPhrase,e.next=6,T("auth/register",Object(b.a)(Object(b.a)({},t),{},{role:"admin"}),"POST");case 6:n=e.sent,localStorage.setItem("validateEmail",JSON.stringify({userId:null===(a=n.data.user)||void 0===a?void 0:a._id,firstName:null===(r=n.data.user)||void 0===r?void 0:r.firstName,token:n.data.token})),e.next=14;break;case 10:return e.next=12,T("auth/register",t,"POST");case 12:i=e.sent,localStorage.setItem("validateEmail",JSON.stringify({userId:null===(s=i.data.user)||void 0===s?void 0:s._id,firstName:null===(c=i.data.user)||void 0===c?void 0:c.firstName,token:i.data.token}));case 14:I.a.fire({icon:"success",title:"<strong>".concat(t.firstName,"</strong>, bienvenid@. Revise su inbox para validar su e-mail"),showConfirmButton:!0,confirmButtonText:"Ok!"}).then((function(e){e.isConfirmed&&P.push("/verify-email")})),N.resetFields(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.data)&&(l=e.t0.response.data,I.a.fire({icon:"error",title:"".concat(l.msg),confirmButtonText:"Lo arreglar\xe9!"}));case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(p.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T("auth/login",t,"POST");case 3:a=e.sent,B(a.data),localStorage.setItem("biblioteca-app",JSON.stringify(a.data)),I.a.fire({icon:"success",title:"Inici\xf3 de sesi\xf3n exitosa!",showConfirmButton:!1,timer:2400}),setTimeout((function(){"admin"===a.data.role?P.push("/admin/books"):P.push("/user/books")}),2500),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),I.a.fire({icon:"error",title:"".concat(e.t0.response.data.msg),confirmButtonText:"Lo revisar\xe9!"});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=setTimeout((function(){w(!0)}),350);return function(){return clearTimeout(e)}}),[]),h?Object(i.jsxs)(g.a,{span:14,className:"border rounded bg-light mx-auto pb-2 pt-4",children:[E?Object(i.jsx)("h2",{className:"text-center",children:"Login"}):Object(i.jsx)("h2",{className:"text-center",children:"Registro"}),Object(i.jsx)(O.a,{children:Object(i.jsx)(g.a,{span:18,className:"mx-auto pb-2 pt-4",children:Object(i.jsxs)(x.a,Object(b.a)(Object(b.a)({form:N},{labelCol:{span:10},wrapperCol:{span:16}}),{},{onFinish:E?U:M,initialValues:{firstName:"",lastName:"",email:"",password:"",passwordConfirmation:""},onFinishFailed:function(e){console.log("Failed:",e)},children:[E?null:Object(i.jsx)(x.a.Item,{label:"Nombre",name:"firstName",rules:[{type:"string",required:!0,message:"Por favor, ingrese su nombre"},{min:3,message:"M\xednimo 3 caracteres"}],children:Object(i.jsx)(v.a,{placeholder:"John"})}),E?null:Object(i.jsx)(x.a.Item,{label:"Apellido",name:"lastName",rules:[{type:"string",required:!0,message:"Por favor, ingrese su apellido"},{min:3,message:"M\xednimo 3 caracteres"}],children:Object(i.jsx)(v.a,{placeholder:"Wick"})}),Object(i.jsx)(x.a.Item,{label:"Correo electr\xf3nico",name:"email",rules:[{type:"email",required:!0,message:"Por favor, ingrese un email v\xe1lido"}],children:E?Object(i.jsx)(v.a,{prefix:Object(i.jsx)(k.a,{className:"site-form-item-icon"}),placeholder:"correo@dominio.com"}):Object(i.jsx)(v.a,{placeholder:"correo@dominio.com"})}),Object(i.jsx)(x.a.Item,{label:"Contrase\xf1a",name:"password",rules:[{required:!0,message:"Por favor, ingrese su contrase\xf1a"},{min:8,message:"M\xednimo 8 caracteres"},{max:20,message:"M\xe1ximo 20 caracteres"}],hasFeedback:!0,children:E?Object(i.jsx)(v.a.Password,{prefix:Object(i.jsx)(H.a,{className:"site-form-item-icon"}),placeholder:"********"}):Object(i.jsx)(v.a.Password,{placeholder:"********"})}),E?null:Object(i.jsx)(x.a.Item,{name:"passwordConfirmation",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Por favor, confirme su contrase\xf1a"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("Las contrase\xf1as ingresadas no coinciden")):Promise.resolve()}}}],children:Object(i.jsx)(v.a.Password,{placeholder:"********"})}),E?null:Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(x.a.Item,Object(b.a)(Object(b.a)({name:"admin",valuePropName:"checked"},{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}),{},{children:Object(i.jsx)(Ce.a,{onChange:function(e){!0!==e.target.checked||E?l(!1):l(!0)},children:"Quiero registrarme como admin"})}))}),s&&!E?Object(i.jsx)(x.a.Item,{label:"Secreto",name:"secretPhrase",rules:[{validator:function(e,t){return"QuieroSerAdmin"===t?Promise.resolve():Promise.reject(new Error("Secreto incorrecto para ser admin"))}}],children:Object(i.jsx)(v.a.Password,{placeholder:"Ingrese el secreto para ser admin"})}):null,Object(i.jsx)(A.a,{type:"primary",htmlType:"submit",className:"mb-3 login-form-button",children:t}),Object(i.jsx)(g.a,{span:24,className:"d-flex justify-content-between mb-3",children:E?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("a",{className:"login-form-forgot",href:"/forgot-password",children:"Olvid\xe9 mi contrase\xf1a"}),Object(i.jsx)("a",{className:"login-form-forgot",href:"/late-validation",children:"Verificar mi e-mail"})]}):null}),Object(i.jsxs)(A.a,{onClick:function(){E?(F(!1),P.push("/register")):(F(!0),P.push("/login"))},children:["Ir al ",E?"registro":"login"]})]}))})})]}):Object(i.jsx)(y.a,{className:"m-3 w-75 mx-auto text-center",children:Object(i.jsx)(z.a,{size:"large",style:{marginTop:"100px"}})})},Se=function(){var e=Object(r.useContext)(o),t=e.isLogin,a=e.setIsLogin,n=Object(r.useContext)(u).user,s=Object(m.g)(),c=Object(m.f)();return Object(r.useEffect)((function(){"admin"===(null===n||void 0===n?void 0:n.role)?c.push("/admin/books"):"basic"===(null===n||void 0===n?void 0:n.role)&&c.push("/user/books"),"/register"===s.pathname?a(!1):a(!0)}),[]),Object(i.jsx)(y.a,{className:"m-3 w-75 mx-auto",children:Object(i.jsx)(O.a,{children:Object(i.jsx)(Ne,{titleSubmitButton:t?"Login":"Registro"})})})},Ee=a(194),Te=a.n(Ee),Fe=function(e){console.log("Failed:",e)},Be=function(e){var t=e.processSubmit,a=e.initialValues,r=e.titleButton,n=x.a.useForm(),s=Object(c.a)(n,1)[0];return Object(i.jsxs)("div",{className:"border rounded mx-auto pb-2 pt-4 light-background w-50 d-flex flex-column align-items-center",children:[Object(i.jsxs)("div",{className:Te.a.static,children:[Object(i.jsx)("img",{src:a.bookImageUrl?a.bookImageUrl:ae,alt:"portada del libro ".concat(a.title)}),Object(i.jsxs)("p",{children:["Autor: ",a.author]}),Object(i.jsxs)("p",{children:["T\xedtulo: ",a.title]})]}),Object(i.jsx)(O.a,{children:Object(i.jsx)(g.a,{className:Te.a.centrar,children:Object(i.jsxs)(x.a,{form:s,name:"validate_other",onFinish:t,initialValues:{rating:a.rating?a.rating:null,comment:a.comment},onFinishFailed:Fe,children:[Object(i.jsx)(x.a.Item,{name:"rating",label:"Valoraci\xf3n",rules:[{required:!0,message:"Debe seleccionar un rating"},{validator:function(e,t){return t>0?Promise.resolve():Promise.reject(new Error("El rating no puede ser cero"))}}],children:Object(i.jsx)(ke.a,{allowHalf:!0})}),Object(i.jsx)(x.a.Item,{name:["comment"],label:"Comentario",rules:[{type:"string",required:!0,message:"Debe ingresar un comentario"},{min:10,message:"M\xednimo 10 caracteres"}],children:Object(i.jsx)(v.a.TextArea,{placeholder:"Deja un comentario al libro...",showCount:!0,maxLength:400,style:{width:600},autoSize:{minRows:2}})}),Object(i.jsx)(x.a.Item,{wrapperCol:{span:12,offset:10},children:Object(i.jsx)(A.a,{type:"primary",htmlType:"submit",children:r})})]})})})]})},Pe=function(){var e=Object(m.f)(),t=Object(r.useState)(!1),a=Object(c.a)(t,2),n=a[0],s=a[1],o=Object(r.useContext)(u),l=o.user,d=o.setUser,j=Object(r.useState)({}),h=Object(c.a)(j,2),x=h[0],v=h[1],k=Object(m.h)().id,y=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("cr/book/user/".concat(k));case 3:t=e.sent,v(t.data),s(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0&&(I.a.fire({icon:"error",title:"".concat(e.t0.response.data.msg),showConfirmButton:!1,timer:2e3}),setTimeout((function(){N()}),2100));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var t=Object(p.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F("cr/create",Object(b.a)(Object(b.a)({},a),{},{bookId:"".concat(k)}),"POST");case 3:I.a.fire({icon:"success",title:"Comentario/Rating registrado con \xe9xito",showConfirmButton:!1,timer:2e3}),setTimeout((function(){e.push("/user/books")}),2100),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0&&(I.a.fire({icon:"error",title:"".concat(t.t0.response.data.msg),showConfirmButton:!1,timer:2e3}),setTimeout((function(){N()}),2100));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(p.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F("cr/edit/".concat(x.cr._id),Object(b.a)(Object(b.a)({},a),{},{_id:x.cr._id}),"PUT");case 3:I.a.fire({icon:"success",title:"El Comentario/Rating fue modificado",showConfirmButton:!1,timer:2e3}),setTimeout((function(){e.push("/user/books")}),2100),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0&&(I.a.fire({icon:"error",title:"".concat(t.t0.response.data.msg),showConfirmButton:!1,timer:2e3}),setTimeout((function(){N()}),2100));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){(null===l||void 0===l?void 0:l._id)||e.push("/login")}),[l,e]),Object(r.useEffect)((function(){if(l&&"basic"===l.role){var t=setTimeout((function(){y()}),350);return function(){return clearTimeout(t)}}e.push("/login")}),[k]);var N=function(){d(null),localStorage.removeItem("biblioteca-app"),e.push("/login")};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(O.a,{justify:"center",children:Object(i.jsxs)(g.a,{span:22,children:[Object(i.jsxs)("p",{className:"text-end",children:["Hola, ",null===l||void 0===l?void 0:l.firstName]}),Object(i.jsx)(A.a,{type:"primary",danger:!0,className:"float-end",onClick:N,children:"Cerrar sesi\xf3n"}),Object(i.jsx)("br",{}),Object(i.jsx)(A.a,{type:"primary",className:"d-block",onClick:function(){return e.push("/user/books")},children:"Lista de libros"})]})}),n?Object(i.jsx)(Be,{processSubmit:null===(null===x||void 0===x?void 0:x.cr)?w:C,initialValues:function(e){return null===(null===e||void 0===e?void 0:e.cr)?{bookImageUrl:e.libro.bookImageUrl,title:e.libro.title,author:e.libro.author,rating:0,comment:""}:{bookImageUrl:null===e||void 0===e||null===(t=e.libro)||void 0===t?void 0:t.bookImageUrl,title:null===e||void 0===e||null===(a=e.libro)||void 0===a?void 0:a.title,author:null===e||void 0===e||null===(r=e.libro)||void 0===r?void 0:r.author,rating:null===e||void 0===e||null===(n=e.cr)||void 0===n?void 0:n.rating,comment:null===e||void 0===e||null===(s=e.cr)||void 0===s?void 0:s.comment};var t,a,r,n,s}(x),titleButton:null===(null===x||void 0===x?void 0:x.cr)?"Crear":"Actualizar"}):Object(i.jsx)("div",{className:"mx-auto pb-2 pt-4 light-background w-50 d-flex flex-column align-items-center",children:Object(i.jsx)(z.a,{size:"large",style:{marginTop:"100px"}})})]})},Me=a(392),Ue=a(395),Qe=a(404),Le=a(235),qe=a.n(Le),Ke=a(174),ze=a.n(Ke),He=(a(377),function(){var e,t=Object(r.useState)([]),a=Object(c.a)(t,2),n=a[0],s=a[1],o=Object(r.useState)(!1),l=Object(c.a)(o,2),d=l[0],j=l[1],h=Object(r.useContext)(u),x=h.user,v=h.setUser,k=Object(r.useState)(1),w=Object(c.a)(k,2),C=w[0],N=w[1],S=Object(r.useState)(6),E=Object(c.a)(S,2),T=E[0],B=E[1],P=Object(r.useState)({}),M=Object(c.a)(P,2),U=M[0],Q=M[1],L=Object(m.f)(),q=function(){var e=Object(p.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("books/user/crs");case 3:t=e.sent,a=t.data.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{key:re()})})),s(a),j(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0&&(I.a.fire({icon:"error",title:"".concat(e.t0.response.data.msg),showConfirmButton:!1,timer:2e3}),setTimeout((function(){K()}),2100));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){x&&"basic"===x.role?q():L.push("/login")}),[]);var K=function(){v(null),localStorage.removeItem("biblioteca-app"),L.push("/login")},H=[{key:re(),title:"Autor",dataIndex:"author",filters:ne(n,"author").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.author.indexOf(e)}},{key:re(),title:"T\xedtulo",dataIndex:"title",filters:ne(n,"title").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.title.indexOf(e)}},{key:re(),title:"A\xf1o",dataIndex:"year",sorter:function(e,t){return e.year-t.year}},{key:re(),title:"Editorial",dataIndex:"publisher",filters:ne(n,"publisher").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.publisher.indexOf(e)}},{key:re(),title:"G\xe9nero",dataIndex:"subject",filters:ne(n,"subject").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.subject.indexOf(e)}},{key:re(),title:"N.\xba de p\xe1gs.",align:"right",dataIndex:"numberOfPages",sorter:function(e,t){return e.numberOfPages-t.numberOfPages}},{key:re(),title:"Img",dataIndex:"bookImageUrl",render:function(e){return Object(i.jsx)(X.a,{height:60,src:e||ae})}},{key:re(),title:"Rating",width:"15%",defaultSortOrder:"descend",sorter:function(e,t){return e.avgRating-t.avgRating},render:function(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(ke.a,{allowHalf:!0,disabled:!0,defaultValue:null===e.avgRating?0:e.avgRating}),1===e.comments.length?Object(i.jsxs)("p",{className:"text-center text-danger",children:[e.comments.length," rese\xf1a"]}):e.comments.length>1?Object(i.jsxs)("p",{className:"text-center text-danger",children:[e.comments.length," rese\xf1as"]}):Object(i.jsx)("p",{className:"text-center text-secondary",children:"Sin rese\xf1as"})]})}},{key:re(),title:"Acciones",render:function(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(ee.a,{style:{color:"#F18F01",marginLeft:5,fontSize:18},onClick:function(){L.push("/user/book/".concat(e._id))}}),Object(i.jsx)(Qe.a,{style:{color:"#3590ff",marginLeft:8,fontSize:22},onClick:function(){return V(e)}})]})}}],G=function(){var e=Object(p.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("cr/book/".concat(t._id));case 3:a=e.sent,Q(a.data),console.log("Comentarios por libro",U),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0&&(I.a.fire({icon:"error",title:"".concat(e.t0.response.data.msg),showConfirmButton:!1,timer:2e3}),setTimeout((function(){K()}),2100));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),J=Object(r.useState)(!1),R=Object(c.a)(J,2),D=R[0],Y=R[1],V=function(e){Y(!0),G(e)};return Object(i.jsxs)(y.a,{className:"m-3 mx-auto",children:[Object(i.jsx)(O.a,{children:Object(i.jsxs)(g.a,{span:22,children:[Object(i.jsxs)("p",{className:"text-end",children:["Hola, ",null===x||void 0===x?void 0:x.firstName]}),Object(i.jsx)(A.a,{type:"primary",danger:!0,className:"float-end",onClick:K,children:"Cerrar sesi\xf3n"}),Object(i.jsx)("br",{})]})}),Object(i.jsx)(O.a,{justify:"center",children:Object(i.jsxs)(g.a,{span:22,style:d?"":{textAlign:"center"},children:[Object(i.jsx)("h2",{className:"text-center",children:"Lista de Libros"}),d?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{className:qe.a.registeredBooks,children:"Total de libros registrados"}),Object(i.jsx)(_.a,{count:n.length,showZero:!0})]}),Object(i.jsx)($.a,{columns:H,dataSource:n,onChange:function(e,t,a){console.log("Table params",e,t,a)},pagination:{showSizeChanger:!0,current:C,pageSize:T,onChange:function(e,t){N(e),B(t)}}})]}):Object(i.jsx)(z.a,{size:"large",style:{marginTop:"250px"}})]})}),Object(i.jsx)(Me.a,{title:"Comentarios de los usuarios",visible:D,onOk:function(){Y(!1)},onCancel:function(){Y(!1)},children:0===U.length?Object(i.jsx)("p",{children:"A\xfan no hay comentarios, sea el primer usuario en comentar \ud83d\udc4f\ud83c\udffc"},re()):Object(i.jsx)(Ue.a,{children:null===U||void 0===U||null===(e=U.comments)||void 0===e?void 0:e.map((function(e){var t;return Object(i.jsxs)(Ue.a.Item,{children:[Object(i.jsx)("span",{children:Object(i.jsxs)("b",{children:[" Comentario de ",null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.firstName,":"]})}),Object(i.jsx)("br",{}),Object(i.jsx)(ke.a,{allowHalf:!0,disabled:!0,defaultValue:null===e||void 0===e?void 0:e.rating}),Object(i.jsx)("br",{}),Object(i.jsxs)("span",{children:['"',Object(i.jsx)("em",{children:null===e||void 0===e?void 0:e.comment}),'"']}),Object(i.jsx)("br",{}),(null===e||void 0===e?void 0:e.createdAt)===(null===e||void 0===e?void 0:e.updatedAt)?Object(i.jsxs)("span",{children:["Creado ",ze()(null===e||void 0===e?void 0:e.createdAt).calendar()]}):Object(i.jsxs)("span",{children:["Editado ",ze()(null===e||void 0===e?void 0:e.updatedAt).calendar()]})]},re())}))})})]})}),Ge=function(){return Object(i.jsxs)(j.a,{children:[Object(i.jsx)(q,{}),Object(i.jsxs)(m.c,{children:[Object(i.jsx)(m.a,{exact:!0,path:"/login",children:Object(i.jsx)(Se,{})}),Object(i.jsx)(m.a,{exact:!0,path:"/register",children:Object(i.jsx)(Se,{})}),Object(i.jsx)(m.a,{exact:!0,path:"/verify-email",children:Object(i.jsx)(Z,{})}),Object(i.jsx)(m.a,{exact:!0,path:"/forgot-password",children:Object(i.jsx)(B,{})}),Object(i.jsx)(m.a,{exact:!0,path:"/reset-password",children:Object(i.jsx)(R,{})}),Object(i.jsx)(m.a,{exact:!0,path:"/admin/books",children:Object(i.jsx)(ie,{})}),Object(i.jsx)(m.a,{exact:!0,path:"/admin/book/new",children:Object(i.jsx)(be,{})}),Object(i.jsx)(m.a,{exact:!0,path:"/admin/book/edit/:id",children:Object(i.jsx)(be,{})}),Object(i.jsx)(m.a,{exact:!0,path:"/user/books",children:Object(i.jsx)(He,{})}),Object(i.jsx)(m.a,{exact:!0,path:"/user/book/:id",children:Object(i.jsx)(Pe,{})}),Object(i.jsx)(j.a,{exact:!0,path:"/",children:Object(i.jsx)(Ie,{})}),Object(i.jsx)(j.a,{exact:!0,path:"/late-validation",children:Object(i.jsx)(P,{})})]})]})};var Je=function(){return Object(i.jsx)(l,{children:Object(i.jsx)(d,{children:Object(i.jsx)(Ge,{})})})};a(378),a(379);s.a.render(Object(i.jsx)(j.a,{children:Object(i.jsx)(Je,{})}),document.getElementById("root"))}},[[380,1,2]]]);
//# sourceMappingURL=main.4efa6a67.chunk.js.map